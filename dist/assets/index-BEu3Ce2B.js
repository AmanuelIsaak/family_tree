(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const S of b.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&c(S)}).observe(document,{childList:!0,subtree:!0});function s(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function c(u){if(u.ep)return;u.ep=!0;const b=s(u);fetch(u.href,b)}})();const no=[["AF","ðŸ‡¦ðŸ‡«","Afghanistan"],["AL","ðŸ‡¦ðŸ‡±","Albania"],["DZ","ðŸ‡©ðŸ‡¿","Algeria"],["AO","ðŸ‡¦ðŸ‡´","Angola"],["AR","ðŸ‡¦ðŸ‡·","Argentina"],["AM","ðŸ‡¦ðŸ‡²","Armenia"],["AU","ðŸ‡¦ðŸ‡º","Australia"],["AT","ðŸ‡¦ðŸ‡¹","Austria"],["AZ","ðŸ‡¦ðŸ‡¿","Azerbaijan"],["BH","ðŸ‡§ðŸ‡­","Bahrain"],["BD","ðŸ‡§ðŸ‡©","Bangladesh"],["BY","ðŸ‡§ðŸ‡¾","Belarus"],["BE","ðŸ‡§ðŸ‡ª","Belgium"],["BJ","ðŸ‡§ðŸ‡¯","Benin"],["BO","ðŸ‡§ðŸ‡´","Bolivia"],["BA","ðŸ‡§ðŸ‡¦","Bosnia"],["BW","ðŸ‡§ðŸ‡¼","Botswana"],["BR","ðŸ‡§ðŸ‡·","Brazil"],["BG","ðŸ‡§ðŸ‡¬","Bulgaria"],["BF","ðŸ‡§ðŸ‡«","Burkina Faso"],["BI","ðŸ‡§ðŸ‡®","Burundi"],["KH","ðŸ‡°ðŸ‡­","Cambodia"],["CM","ðŸ‡¨ðŸ‡²","Cameroon"],["CA","ðŸ‡¨ðŸ‡¦","Canada"],["CF","ðŸ‡¨ðŸ‡«","Central African Rep."],["TD","ðŸ‡¹ðŸ‡©","Chad"],["CL","ðŸ‡¨ðŸ‡±","Chile"],["CN","ðŸ‡¨ðŸ‡³","China"],["CO","ðŸ‡¨ðŸ‡´","Colombia"],["CD","ðŸ‡¨ðŸ‡©","Congo (DRC)"],["CG","ðŸ‡¨ðŸ‡¬","Congo (Rep.)"],["CR","ðŸ‡¨ðŸ‡·","Costa Rica"],["HR","ðŸ‡­ðŸ‡·","Croatia"],["CU","ðŸ‡¨ðŸ‡º","Cuba"],["CY","ðŸ‡¨ðŸ‡¾","Cyprus"],["CZ","ðŸ‡¨ðŸ‡¿","Czechia"],["DK","ðŸ‡©ðŸ‡°","Denmark"],["DJ","ðŸ‡©ðŸ‡¯","Djibouti"],["DO","ðŸ‡©ðŸ‡´","Dominican Republic"],["EC","ðŸ‡ªðŸ‡¨","Ecuador"],["EG","ðŸ‡ªðŸ‡¬","Egypt"],["SV","ðŸ‡¸ðŸ‡»","El Salvador"],["GQ","ðŸ‡¬ðŸ‡¶","Equatorial Guinea"],["ER","ðŸ‡ªðŸ‡·","Eritrea"],["EE","ðŸ‡ªðŸ‡ª","Estonia"],["SZ","ðŸ‡¸ðŸ‡¿","Eswatini"],["ET","ðŸ‡ªðŸ‡¹","Ethiopia"],["FI","ðŸ‡«ðŸ‡®","Finland"],["FR","ðŸ‡«ðŸ‡·","France"],["GA","ðŸ‡¬ðŸ‡¦","Gabon"],["GM","ðŸ‡¬ðŸ‡²","Gambia"],["GE","ðŸ‡¬ðŸ‡ª","Georgia"],["DE","ðŸ‡©ðŸ‡ª","Germany"],["GH","ðŸ‡¬ðŸ‡­","Ghana"],["GR","ðŸ‡¬ðŸ‡·","Greece"],["GT","ðŸ‡¬ðŸ‡¹","Guatemala"],["GN","ðŸ‡¬ðŸ‡³","Guinea"],["GW","ðŸ‡¬ðŸ‡¼","Guinea-Bissau"],["GY","ðŸ‡¬ðŸ‡¾","Guyana"],["HT","ðŸ‡­ðŸ‡¹","Haiti"],["HN","ðŸ‡­ðŸ‡³","Honduras"],["HU","ðŸ‡­ðŸ‡º","Hungary"],["IS","ðŸ‡®ðŸ‡¸","Iceland"],["IN","ðŸ‡®ðŸ‡³","India"],["ID","ðŸ‡®ðŸ‡©","Indonesia"],["IR","ðŸ‡®ðŸ‡·","Iran"],["IQ","ðŸ‡®ðŸ‡¶","Iraq"],["IE","ðŸ‡®ðŸ‡ª","Ireland"],["IL","ðŸ‡®ðŸ‡±","Israel"],["IT","ðŸ‡®ðŸ‡¹","Italy"],["JM","ðŸ‡¯ðŸ‡²","Jamaica"],["JP","ðŸ‡¯ðŸ‡µ","Japan"],["JO","ðŸ‡¯ðŸ‡´","Jordan"],["KZ","ðŸ‡°ðŸ‡¿","Kazakhstan"],["KE","ðŸ‡°ðŸ‡ª","Kenya"],["KW","ðŸ‡°ðŸ‡¼","Kuwait"],["KG","ðŸ‡°ðŸ‡¬","Kyrgyzstan"],["LA","ðŸ‡±ðŸ‡¦","Laos"],["LV","ðŸ‡±ðŸ‡»","Latvia"],["LB","ðŸ‡±ðŸ‡§","Lebanon"],["LS","ðŸ‡±ðŸ‡¸","Lesotho"],["LR","ðŸ‡±ðŸ‡·","Liberia"],["LY","ðŸ‡±ðŸ‡¾","Libya"],["LT","ðŸ‡±ðŸ‡¹","Lithuania"],["LU","ðŸ‡±ðŸ‡º","Luxembourg"],["MG","ðŸ‡²ðŸ‡¬","Madagascar"],["MW","ðŸ‡²ðŸ‡¼","Malawi"],["MY","ðŸ‡²ðŸ‡¾","Malaysia"],["ML","ðŸ‡²ðŸ‡±","Mali"],["MR","ðŸ‡²ðŸ‡·","Mauritania"],["MU","ðŸ‡²ðŸ‡º","Mauritius"],["MX","ðŸ‡²ðŸ‡½","Mexico"],["MA","ðŸ‡²ðŸ‡¦","Morocco"],["MZ","ðŸ‡²ðŸ‡¿","Mozambique"],["MM","ðŸ‡²ðŸ‡²","Myanmar"],["NA","ðŸ‡³ðŸ‡¦","Namibia"],["NP","ðŸ‡³ðŸ‡µ","Nepal"],["NL","ðŸ‡³ðŸ‡±","Netherlands"],["NZ","ðŸ‡³ðŸ‡¿","New Zealand"],["NI","ðŸ‡³ðŸ‡®","Nicaragua"],["NE","ðŸ‡³ðŸ‡ª","Niger"],["NG","ðŸ‡³ðŸ‡¬","Nigeria"],["NO","ðŸ‡³ðŸ‡´","Norway"],["OM","ðŸ‡´ðŸ‡²","Oman"],["PK","ðŸ‡µðŸ‡°","Pakistan"],["PA","ðŸ‡µðŸ‡¦","Panama"],["PY","ðŸ‡µðŸ‡¾","Paraguay"],["PE","ðŸ‡µðŸ‡ª","Peru"],["PH","ðŸ‡µðŸ‡­","Philippines"],["PL","ðŸ‡µðŸ‡±","Poland"],["PT","ðŸ‡µðŸ‡¹","Portugal"],["QA","ðŸ‡¶ðŸ‡¦","Qatar"],["RO","ðŸ‡·ðŸ‡´","Romania"],["RU","ðŸ‡·ðŸ‡º","Russia"],["RW","ðŸ‡·ðŸ‡¼","Rwanda"],["SA","ðŸ‡¸ðŸ‡¦","Saudi Arabia"],["SN","ðŸ‡¸ðŸ‡³","Senegal"],["RS","ðŸ‡·ðŸ‡¸","Serbia"],["SL","ðŸ‡¸ðŸ‡±","Sierra Leone"],["SG","ðŸ‡¸ðŸ‡¬","Singapore"],["SK","ðŸ‡¸ðŸ‡°","Slovakia"],["SI","ðŸ‡¸ðŸ‡®","Slovenia"],["SO","ðŸ‡¸ðŸ‡´","Somalia"],["ZA","ðŸ‡¿ðŸ‡¦","South Africa"],["KR","ðŸ‡°ðŸ‡·","South Korea"],["SS","ðŸ‡¸ðŸ‡¸","South Sudan"],["ES","ðŸ‡ªðŸ‡¸","Spain"],["LK","ðŸ‡±ðŸ‡°","Sri Lanka"],["SD","ðŸ‡¸ðŸ‡©","Sudan"],["SR","ðŸ‡¸ðŸ‡·","Suriname"],["SE","ðŸ‡¸ðŸ‡ª","Sweden"],["CH","ðŸ‡¨ðŸ‡­","Switzerland"],["SY","ðŸ‡¸ðŸ‡¾","Syria"],["TW","ðŸ‡¹ðŸ‡¼","Taiwan"],["TZ","ðŸ‡¹ðŸ‡¿","Tanzania"],["TH","ðŸ‡¹ðŸ‡­","Thailand"],["TG","ðŸ‡¹ðŸ‡¬","Togo"],["TT","ðŸ‡¹ðŸ‡¹","Trinidad & Tobago"],["TN","ðŸ‡¹ðŸ‡³","Tunisia"],["TR","ðŸ‡¹ðŸ‡·","Turkey"],["TM","ðŸ‡¹ðŸ‡²","Turkmenistan"],["UG","ðŸ‡ºðŸ‡¬","Uganda"],["UA","ðŸ‡ºðŸ‡¦","Ukraine"],["AE","ðŸ‡¦ðŸ‡ª","UAE"],["GB","ðŸ‡¬ðŸ‡§","United Kingdom"],["US","ðŸ‡ºðŸ‡¸","United States"],["UY","ðŸ‡ºðŸ‡¾","Uruguay"],["UZ","ðŸ‡ºðŸ‡¿","Uzbekistan"],["VE","ðŸ‡»ðŸ‡ª","Venezuela"],["VN","ðŸ‡»ðŸ‡³","Vietnam"],["YE","ðŸ‡¾ðŸ‡ª","Yemen"],["ZM","ðŸ‡¿ðŸ‡²","Zambia"],["ZW","ðŸ‡¿ðŸ‡¼","Zimbabwe"]],ie={};no.forEach(l=>{ie[l[0]]={code:l[0],flag:l[1],name:l[2]}});const f={members:[],editingId:null,nextId:1,egoId:null,pendPh:null,impData:null,panX:0,panY:0,scale:1,isPan:!1,psx:0,psy:0,lastPos:{}};function We(){try{localStorage.setItem("ft_v4",JSON.stringify({members:f.members,nextId:f.nextId,egoId:f.egoId}))}catch{}}function Ha(){try{let l=localStorage.getItem("ft_v4");if(l){const h=JSON.parse(l);f.members=h.members||[],f.nextId=h.nextId||1,f.egoId=h.egoId||null;return}for(const h of["ft_v3","familyTreeData_v2","familyTreeData"])if(l=localStorage.getItem(h),l){const s=JSON.parse(l),c=s.members||[];f.members=c.map(u=>({id:u.id,firstName:u.firstName,lastName:u.lastName||"",gender:u.gender||"male",birthYear:u.birthYear||null,parent1Id:u.parent1Id||u.parentId||null,parent2Id:u.parent2Id||null,spouseId:u.spouseId||null,notes:u.notes||"",photo:u.photo||null,country:u.country||"",city:u.city||"",cityLat:u.cityLat||null,cityLng:u.cityLng||null,side:u.side||""})),f.nextId=s.nextId||1,We();return}}catch{}}const _=l=>document.getElementById(l),j=l=>f.members.find(h=>h.id===l),Yt=l=>f.members.filter(h=>h.parent1Id===l);function fi(l,h){if(h||(h=new Set),h.has(l))return 0;h.add(l);const s=j(l);return!s||!s.parent1Id?0:1+fi(s.parent1Id,h)}function bt(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function te(l){if(l.side&&l.side!=="")return l.side;if(l.parent1Id){const h=j(l.parent1Id);if(h)return te(h)}return""}function Ga(l){const h=[];l.birthYear&&h.push("b."+l.birthYear),l.country&&ie[l.country]&&h.push(ie[l.country].flag+(l.city?" "+l.city:""));const s=Yt(l.id);if(s.length&&h.push(s.length+"ch"),l.spouseId){const c=j(l.spouseId);c&&h.push("âˆž"+c.firstName)}return l.notes&&h.push(l.notes),h.join(" Â· ")||"No details"}function Jn(l){const h=j(l);if(!h)return[];const s=new Set;return h.parent1Id&&f.members.forEach(c=>{c.id!==l&&c.parent1Id===h.parent1Id&&s.add(c)}),h.parent2Id&&f.members.forEach(c=>{c.id!==l&&(c.parent1Id===h.parent2Id||c.parent2Id===h.parent2Id)&&s.add(c)}),[...s].sort((c,u)=>(c.birthYear||9999)-(u.birthYear||9999)||c.id-u.id)}function Xn(l){const h=[];let s=j(l);for(;s&&s.parent1Id;){const c=j(s.parent1Id);if(!c)break;h.push({id:c.id,spouseId:c.spouseId||null}),s=c}return h}function Vt(l,h){if(h||(h=new Set),h.has(l))return 0;h.add(l);let s=0;Yt(l).forEach(u=>{s++,s+=Vt(u.id,h)});const c=j(l);return c&&c.spouseId&&!h.has(c.spouseId)&&Yt(c.spouseId).forEach(u=>{h.has(u.id)||(s++,s+=Vt(u.id,h))}),s}function Ka(l){const h=document.documentElement,s=h.dataset.theme==="dark"?"light":"dark";h.dataset.theme=s,_("themeBtn").textContent=s==="dark"?"â˜€":"â˜¾";try{localStorage.setItem("ft_theme",s)}catch{}l()}function Fa(){try{const l=localStorage.getItem("ft_theme");l&&(document.documentElement.dataset.theme=l,_("themeBtn").textContent=l==="dark"?"â˜€":"â˜¾")}catch{}}function oo(){const l=_("searchIn").value.toLowerCase(),h=f.members.filter(N=>(N.firstName+" "+(N.lastName||"")).toLowerCase().includes(l)),s={paternal:[],maternal:[],unknown:[]};h.forEach(N=>{const w=te(N);w==="paternal"?s.paternal.push(N):w==="maternal"?s.maternal.push(N):s.unknown.push(N)});let c="";const u=["Roots","Gen 1","Gen 2","Gen 3","Gen 4","Gen 5","Gen 6","Gen 7","Gen 8"];function b(N,w){if(w.length===0)return;const tt={};w.forEach(z=>{const C=fi(z.id);tt[C]||(tt[C]=[]),tt[C].push(z)}),N&&(c+='<div class="gl" style="color:var(--acc);padding-top:14px">â”€â”€ '+N+" â”€â”€</div>"),Object.keys(tt).sort((z,C)=>z-C).forEach(z=>{c+='<div class="gl">'+(u[z]||"Gen "+z)+" Â· "+tt[z].length+"</div>",tt[z].sort((C,nt)=>C.firstName.localeCompare(nt.firstName)).forEach(C=>{const nt=(C.firstName[0]+(C.lastName?C.lastName[0]:"")).toUpperCase(),ht=Ga(C),V=C.photo?"background-image:url("+C.photo+")":"",k=C.photo?"":"np "+C.gender;c+='<div class="mi" data-id="'+C.id+'"><div class="ma '+k+'" style="'+V+'">'+(C.photo?"":nt)+'</div><div class="mi-info"><div class="mn">'+bt(C.firstName)+" "+bt(C.lastName||"")+'</div><div class="ms">'+bt(ht)+"</div></div></div>"})})}b("Dad's Side",s.paternal),b("Mom's Side",s.maternal),b(s.paternal.length||s.maternal.length?"Unassigned":null,s.unknown),_("memberList").innerHTML=c||'<div style="text-align:center;padding:40px 0;color:var(--t3);font-size:11px">No members yet</div>';const S={};f.members.forEach(N=>{S[fi(N.id)]=!0}),_("fCount").textContent=f.members.length+" member"+(f.members.length!==1?"s":""),_("fGen").textContent=Object.keys(S).length+" gen"}function Wa(l){_("memberList").addEventListener("click",h=>{const s=h.target.closest(".mi");s&&s.dataset.id&&l(parseInt(s.dataset.id))})}const F=90,xt=34,ft=12,Qn=46,jt=8,ee=new Set;let Dt="all",xe="classic";function ao(l){xe=l,Lt(),ue()}function Ua(l){Dt=l,document.querySelectorAll(".sf-btn").forEach(h=>h.classList.toggle("active",h.dataset.side===l)),Lt(),ue()}function $n(l,h,s){const c=l.x+l.w/2,u=l.y+l.h,b=h.x+h.w/2,S=h.y,N=u+(S-u)/2;return'<path d="M'+c+","+u+" L"+c+","+N+" L"+b+","+N+" L"+b+","+S+'" fill="none" stroke="var(--edge)" stroke-width="1" stroke-dasharray="'+(s?"2,3":"3,3")+'" opacity="'+(s?".3":".6")+'"/>'}function ja(l){const h=Object.keys(l);if(!h.length)return;let s=1/0,c=1/0,u=-1/0,b=-1/0;h.forEach(ht=>{const V=l[ht];s=Math.min(s,V.x),c=Math.min(c,V.y),u=Math.max(u,V.x+V.w),b=Math.max(b,V.y+V.h)});const S=15;s-=S,c-=S,u+=S,b+=S;let N='<svg viewBox="'+s+" "+c+" "+(u-s)+" "+(b-c)+'" preserveAspectRatio="xMidYMid meet">';h.forEach(ht=>{const V=l[ht],k=j(parseInt(ht)),Pt=k&&k.gender==="female"?"var(--fdot)":"var(--mdot)";N+='<rect x="'+V.x+'" y="'+V.y+'" width="'+V.w+'" height="'+V.h+'" rx="2" fill="'+Pt+'" opacity=".4"/>'});const w=_("treeView").getBoundingClientRect(),tt=-f.panX/f.scale,z=-f.panY/f.scale,C=w.width/f.scale,nt=w.height/f.scale;N+='<rect class="mm-vp" x="'+tt+'" y="'+z+'" width="'+C+'" height="'+nt+'" rx="3"/></svg>',_("mmSvg").innerHTML=N}function Lt(){const l=_("treeSvg"),h=_("emptyState"),s=_("minimap");if(!f.members.length){l.innerHTML="",h.style.display="block",s.style.display="none",_("statsBar").innerHTML="";return}h.style.display="none",s.style.display="block";const c={},u=new Set,b=new Set;function S(p){const y=j(p);if(!y)return[];let x=Yt(p);if(y.spouseId&&!u.has(y.spouseId)){const T=Yt(y.spouseId).filter(Y=>!x.find(O=>O.id===Y.id));x=x.concat(T)}return x.filter(T=>!u.has(T.id)).sort((T,Y)=>(T.birthYear||9999)-(Y.birthYear||9999)||T.id-Y.id)}function N(p){Yt(p).forEach(y=>{if(!u.has(y.id)){u.add(y.id);const x=j(y.id);if(x&&x.spouseId&&!u.has(x.spouseId)){const T=j(x.spouseId);T&&!T.parent1Id&&u.add(x.spouseId)}N(y.id)}})}function w(p){if(u.has(p))return 0;const y=j(p);if(!y)return 0;const x=y.spouseId&&j(y.spouseId)&&!u.has(y.spouseId),T=x?F*2+jt:F;if(ee.has(p))return T;u.add(p),x&&u.add(y.spouseId);const Y=S(p);let O=0;return Y.forEach((A,et)=>{et>0&&(O+=ft),O+=w(A.id)}),u.delete(p),x&&u.delete(y.spouseId),Math.max(T,O)}function tt(p,y,x){if(u.has(p))return;const T=j(p);if(!T)return;u.add(p),b.add(p);const Y=T.spouseId&&j(T.spouseId)&&!u.has(T.spouseId);if(Y&&u.add(T.spouseId),ee.has(p)){const g=y;c[p]={x:g,y:x,w:F,h:xt},Y&&(c[T.spouseId]={x:g+F+jt,y:x,w:F,h:xt}),N(p),Y&&N(T.spouseId);return}const O=S(p),A=O.map(g=>w(g.id));let et=0;A.forEach((g,Z)=>{Z>0&&(et+=ft),et+=g});const Q=Y?F*2+jt:F,mt=Math.max(Q,et),$=y+(mt-Q)/2;c[p]={x:$,y:x,w:F,h:xt},Y&&(c[T.spouseId]={x:$+F+jt,y:x,w:F,h:xt});let G=y+(mt-et)/2;O.forEach(g=>{const Z=w(g.id);tt(g.id,G,x+xt+Qn),G+=Z+ft})}function z(){const p=j(f.egoId);if(!p)return!1;let y=p.parent1Id,x=p.parent2Id;if(!x&&y){const M=j(y);M&&M.spouseId&&(x=M.spouseId)}if(!y&&x){const M=j(x);M&&M.spouseId&&(y=M.spouseId)}if(!y&&!x)return!1;const T=new Set;y&&Yt(y).forEach(M=>{M.id!==f.egoId&&T.add(M.id)}),x&&Yt(x).forEach(M=>{M.id!==f.egoId&&T.add(M.id)});const O=[...[...T].map(M=>j(M)).filter(Boolean).sort((M,X)=>(M.birthYear||9999)-(X.birthYear||9999)||M.id-X.id),p].sort((M,X)=>(M.birthYear||9999)-(X.birthYear||9999)||M.id-X.id),A=y?Jn(y):[],et=x?Jn(x):[],Q=y?Xn(y):[],mt=x?Xn(x):[],$=Math.max(Q.length,mt.length),G=xt+Qn,g=40,Z=A.map(M=>w(M.id)),E=et.map(M=>w(M.id)),ot=O.map(M=>w(M.id)),vt=Z.reduce((M,X,yt)=>M+X+(yt>0?ft:0),0);E.reduce((M,X,yt)=>M+X+(yt>0?ft:0),0);const _t=ot.reduce((M,X,yt)=>M+X+(yt>0?ft:0),0),st=Math.max(ft*3,_t/2-F+ft*3),q=g+($+2)*G,D=q-G,St=q-2*G,Ct=g+vt+(A.length?st+F+jt/2:F/2),qt=Ct-F-jt/2,Gt=Ct+jt/2;y&&(c[y]={x:qt,y:D,w:F,h:xt},u.add(y),b.add(y)),x&&(c[x]={x:Gt,y:D,w:F,h:xt},u.add(x),b.add(x));let Jt=Ct-_t/2;O.forEach((M,X)=>{u.has(M.id)||tt(M.id,Jt,q),Jt+=ot[X]+ft});let oe=qt-st;for(let M=A.length-1;M>=0;M--){const X=A[M];if(u.has(X.id))oe-=Z[M]+ft;else{const yt=oe-Z[M];tt(X.id,yt,D),oe=yt-ft}}let je=Gt+F+st;if(et.forEach((M,X)=>{u.has(M.id)||tt(M.id,je,D),je+=E[X]+ft}),Q.length>0){let M=qt+F,X=qt;Object.keys(c).forEach(it=>{const ut=c[it];ut.y===D&&ut.x+ut.w<=qt+F+1&&(M=Math.min(M,ut.x),X=Math.max(X,ut.x+ut.w))});const yt=(M+X)/2;Q.forEach((it,ut)=>{const Xt=St-ut*G;if(u.has(it.id)||(c[it.id]={x:yt-F/2,y:Xt,w:F,h:xt},u.add(it.id),b.add(it.id)),it.spouseId&&!u.has(it.spouseId)){const ce=c[it.id]?c[it.id].x:yt-F/2;c[it.spouseId]={x:ce+F+jt,y:Xt,w:F,h:xt},u.add(it.spouseId)}})}if(mt.length>0){let M=Gt+F,X=Gt;Object.keys(c).forEach(it=>{const ut=c[it];ut.y===D&&ut.x>=Gt-1&&(M=Math.min(M,ut.x),X=Math.max(X,ut.x+ut.w))});const yt=(M+X)/2;mt.forEach((it,ut)=>{const Xt=St-ut*G;if(u.has(it.id)||(c[it.id]={x:yt-F/2,y:Xt,w:F,h:xt},u.add(it.id),b.add(it.id)),it.spouseId&&!u.has(it.spouseId)){const ce=c[it.id]?c[it.id].x:yt-F/2;c[it.spouseId]={x:ce+F+jt,y:Xt,w:F,h:xt},u.add(it.spouseId)}})}const Ve=Object.values(c).length?Math.max(...Object.values(c).map(M=>M.y+M.h))+G:g;let Se=g;return f.members.forEach(M=>{u.has(M.id)||(c[M.id]={x:Se,y:Ve,w:F,h:xt},u.add(M.id),Se+=F+ft)}),!0}xe==="ego"&&f.egoId&&(z()||(xe="classic"));let C=0,nt=0,ht=!0,V=!0,k=[],Pt=[];if(xe!=="ego"||!f.egoId){const p=new Set;f.members.forEach(g=>{if(g.spouseId){const Z=j(g.spouseId);Z&&!Z.parent1Id&&Yt(Z.id).length===0&&p.add(Z.id)}});const y=f.members.filter(g=>!g.parent1Id&&!p.has(g.id));k=y.filter(g=>te(g)==="paternal").sort((g,Z)=>Vt(Z.id)-Vt(g.id)),Pt=y.filter(g=>te(g)==="maternal").sort((g,Z)=>Vt(Z.id)-Vt(g.id));const x=y.filter(g=>{const Z=te(g);return Z!=="paternal"&&Z!=="maternal"}).sort((g,Z)=>Vt(Z.id)-Vt(g.id));ht=Dt==="all"||Dt==="paternal",V=Dt==="all"||Dt==="maternal";const T=Dt==="all";let Y=0,O=0,A=0;ht&&k.forEach((g,Z)=>{Z>0&&(Y+=ft*3),Y+=w(g.id)}),V&&Pt.forEach((g,Z)=>{Z>0&&(O+=ft*3),O+=w(g.id)}),T&&x.forEach((g,Z)=>{Z>0&&(A+=ft*3),A+=w(g.id)});const Q=_("treeView").getBoundingClientRect().width/(f.scale||1),mt=100,$=(ht&&k.length?1:0)+(V&&Pt.length?1:0);let G;if(Dt!=="all"||$<=1){const g=Y+O+A;G=Math.max(40,(Q-g)/2)}else{const g=Q/2;G=Math.max(40,g-Y-mt/2)}if(C=G,ht&&(k.forEach(g=>{if(u.has(g.id))return;const Z=w(g.id);tt(g.id,G,40),G+=Z+ft*3}),C=G),ht&&k.length&&(V&&Pt.length||T&&x.length))if($===2){const g=Q/2;G=Math.max(G+60,g+mt/2)}else G+=60;nt=G,V&&Pt.forEach(g=>{if(u.has(g.id))return;const Z=w(g.id);tt(g.id,G,40),G+=Z+ft*3}),T&&x.length&&(k.length||Pt.length)&&(G+=40),T&&x.forEach(g=>{if(u.has(g.id))return;const Z=w(g.id);tt(g.id,G,40),G+=Z+ft*3}),Dt==="all"&&f.members.forEach(g=>{u.has(g.id)||(c[g.id]={x:G,y:40,w:F,h:xt},u.add(g.id),G+=F+ft)})}f.lastPos=c;let U='<g transform="translate('+f.panX+","+f.panY+") scale("+f.scale+')">';if(xe==="ego"&&f.egoId){const p=j(f.egoId);if(p&&c[f.egoId]){const A=c[f.egoId];U+='<text x="'+(A.x+F/2)+'" y="'+(A.y-8)+'" text-anchor="middle" font-family="Instrument Serif,serif" font-size="11" fill="var(--acc)" font-style="italic">you</text>'}const y=Object.keys(c);let x=1/0,T=-1/0;if(p&&p.parent1Id&&c[p.parent1Id]){const A=c[p.parent1Id].x;y.forEach(et=>{c[et].x<=A&&(x=Math.min(x,c[et].x))})}if(p&&(p.parent2Id||p.parent1Id&&j(p.parent1Id)&&j(p.parent1Id).spouseId)){const A=p.parent2Id||(p.parent1Id?j(p.parent1Id).spouseId:null);if(A&&c[A]){const et=c[A].x;y.forEach(Q=>{c[Q].x>=et&&(T=Math.max(T,c[Q].x+F))})}}const Y=Object.values(c),O=Y.length?Math.min(...Y.map(A=>A.y)):40;x<1/0&&(U+='<text x="'+x+'" y="'+(O-8)+'" font-family="Instrument Serif,serif" font-size="13" fill="var(--t3)" font-style="italic">Paternal</text>'),T>-1/0&&(U+='<text x="'+T+'" y="'+(O-8)+'" text-anchor="end" font-family="Instrument Serif,serif" font-size="13" fill="var(--t3)" font-style="italic">Maternal</text>')}else{if(ht&&k.length){const p=k[0]&&c[k[0].id]?c[k[0].id].x:40;U+='<text x="'+p+`" y="26" font-family="Instrument Serif,serif" font-size="13" fill="var(--t3)" font-style="italic">Dad's Side</text>`}if(V&&Pt.length){let p=1/0;Pt.forEach(y=>{c[y.id]&&(p=Math.min(p,c[y.id].x))}),p<1/0&&(U+='<text x="'+p+`" y="26" font-family="Instrument Serif,serif" font-size="13" fill="var(--t3)" font-style="italic">Mom's Side</text>`)}}if(xe!=="ego"&&Dt==="all"&&k.length&&Pt.length){let p=1/0,y=-1/0;Object.values(c).forEach(T=>{p=Math.min(p,T.y),y=Math.max(y,T.y+T.h)});const x=(C+nt)/2;U+='<line x1="'+x+'" y1="'+(p-10)+'" x2="'+x+'" y2="'+(y+20)+'" stroke="var(--brd)" stroke-width="1" stroke-dasharray="4,4" opacity="0.5"/>'}f.members.forEach(p=>{p.parent1Id&&c[p.id]&&c[p.parent1Id]&&(U+=$n(c[p.parent1Id],c[p.id],!1)),p.parent2Id&&c[p.id]&&c[p.parent2Id]&&(U+=$n(c[p.parent2Id],c[p.id],!0))});const Te=new Set;f.members.forEach(p=>{if(p.spouseId&&c[p.id]&&c[p.spouseId]){const y=Math.min(p.id,p.spouseId)+"-"+Math.max(p.id,p.spouseId);if(Te.has(y))return;Te.add(y);const x=c[p.id],T=c[p.spouseId];if(Math.abs(x.x+x.w/2-(T.x+T.w/2))<F*3){const O=x.x<T.x?x.x+x.w:x.x,A=x.x<T.x?T.x:T.x+T.w,et=(x.y+x.h/2+T.y+T.h/2)/2;U+='<line x1="'+O+'" y1="'+et+'" x2="'+A+'" y2="'+et+'" stroke="var(--spline)" stroke-width="1.2" stroke-dasharray="3,3" opacity="0.6"/>',U+='<text x="'+(O+A)/2+'" y="'+(et+3)+'" text-anchor="middle" font-size="8" fill="var(--spline)">â™¥</text>'}else U+='<path d="M'+(x.x+x.w/2)+","+x.y+" Q"+(x.x+x.w/2+T.x+T.w/2)/2+","+(Math.min(x.y,T.y)-20)+" "+(T.x+T.w/2)+","+T.y+'" fill="none" stroke="var(--spline)" stroke-width="1" stroke-dasharray="3,3" opacity="0.35"/>'}}),Dt==="all"&&f.members.forEach(p=>{if(!p.spouseId||!p.parent1Id||!c[p.id])return;te(p);const y=j(p.spouseId);if(!y||!c[p.spouseId])return;const x=te(y),T=j(p.parent1Id);if(!T||!c[p.parent1Id])return;const Y=te(T);if(Y&&x&&Y!==x){const O=c[p.id],A=c[p.parent1Id],et=O.x+O.w/2,Q=O.y,mt=A.x+A.w/2,$=A.y+A.h,G=Math.min(Q,$)-40;U+='<path d="M'+et+","+Q+" C"+et+","+G+" "+mt+","+G+" "+mt+","+$+'" fill="none" stroke="var(--acc)" stroke-width="1" stroke-dasharray="4,3" opacity="0.35"/>';const g=(et+mt)/2,Z=G+8;U+='<text x="'+g+'" y="'+Z+'" text-anchor="middle" font-family="Geist,sans-serif" font-size="7" fill="var(--acc)" opacity="0.5">â†”</text>'}}),f.members.forEach(p=>{if(!c[p.id])return;const y=c[p.id],x=p.gender==="female"?"var(--fdot)":"var(--mdot)",T=p.firstName+(p.lastName?" "+p.lastName[0]+".":""),Y=[];p.birthYear&&Y.push("b."+p.birthYear),p.country&&ie[p.country]&&Y.push(ie[p.country].flag+(p.city?" "+p.city:""));const O=Y.join(" "),A=p.id===f.egoId;U+='<g class="nd" data-id="'+p.id+'" style="cursor:pointer">',A&&(U+='<rect x="'+(y.x-3)+'" y="'+(y.y-3)+'" width="'+(F+6)+'" height="'+(xt+6)+'" rx="8" fill="var(--acc)" opacity="0.15"/>'),U+='<rect x="'+y.x+'" y="'+y.y+'" width="'+y.w+'" height="'+y.h+'" rx="5" fill="var(--nbg)" stroke="'+(A?"var(--acc)":"var(--nbrd)")+'" stroke-width="'+(A?"1.5":"1")+'"/>',p.photo?(U+='<defs><clipPath id="cp'+p.id+'"><circle cx="'+(y.x+12)+'" cy="'+(y.y+y.h/2)+'" r="8"/></clipPath></defs>',U+='<image href="'+p.photo+'" x="'+(y.x+4)+'" y="'+(y.y+y.h/2-8)+'" width="16" height="16" clip-path="url(#cp'+p.id+')" preserveAspectRatio="xMidYMid slice"/>',U+='<circle cx="'+(y.x+12)+'" cy="'+(y.y+y.h/2)+'" r="8" fill="none" stroke="var(--nbrd)" stroke-width=".5"/>'):U+='<circle cx="'+(y.x+10)+'" cy="'+(y.y+y.h/2)+'" r="2.5" fill="'+x+'"/>';const et=p.photo?y.x+25:y.x+17;U+='<text x="'+et+'" y="'+(y.y+y.h/2-(O?2:0))+'" font-family="Geist,sans-serif" font-size="9" font-weight="600" fill="var(--t0)" dominant-baseline="middle">'+bt(T)+"</text>",O&&(U+='<text x="'+et+'" y="'+(y.y+y.h/2+8)+'" font-family="Geist,sans-serif" font-size="7" fill="var(--t2)" dominant-baseline="middle">'+O+"</text>"),U+="</g>";const Q=Vt(p.id);if(b.has(p.id)&&Q>0){const mt=ee.has(p.id),$=y.y+y.h+3,g=p.spouseId&&c[p.spouseId]?(y.x+c[p.spouseId].x+c[p.spouseId].w)/2:y.x+y.w/2,Z=mt?"+"+Q:"âˆ’",E=mt?Math.max(24,String(Q).length*6+18):16;U+='<g class="tog" data-toggle="'+p.id+'" style="cursor:pointer">',mt?(U+='<rect x="'+(g-E/2)+'" y="'+$+'" width="'+E+'" height="13" rx="6.5" fill="var(--accbg)" stroke="var(--accbd)" stroke-width="0.8"/>',U+='<text x="'+g+'" y="'+($+9.5)+'" text-anchor="middle" font-family="Geist,sans-serif" font-size="8" font-weight="700" fill="var(--acc)">'+Z+"</text>"):(U+='<rect x="'+(g-E/2)+'" y="'+$+'" width="'+E+'" height="13" rx="6.5" fill="var(--bg2)" stroke="var(--brd)" stroke-width="0.6"/>',U+='<text x="'+g+'" y="'+($+9.5)+'" text-anchor="middle" font-family="Geist,sans-serif" font-size="9" font-weight="600" fill="var(--t3)">'+Z+"</text>"),U+="</g>"}}),U+="</g>",l.innerHTML=U,l.querySelectorAll(".nd").forEach(p=>{p.addEventListener("click",function(y){y.stopPropagation(),document.dispatchEvent(new CustomEvent("openEdit",{detail:parseInt(this.dataset.id)}))}),p.addEventListener("mouseenter",function(){this.querySelector("rect").setAttribute("stroke","var(--acc)")}),p.addEventListener("mouseleave",function(){const y=parseInt(this.dataset.id);this.querySelector("rect").setAttribute("stroke",y===f.egoId?"var(--acc)":"var(--nbrd)")})}),l.querySelectorAll(".tog").forEach(p=>{p.addEventListener("click",function(y){y.stopPropagation();const x=parseInt(this.dataset.toggle);ee.has(x)?ee.delete(x):ee.add(x),Lt()})});const Tt={};f.members.forEach(p=>{Tt[fi(p.id)]=!0});const Me=f.members.filter(p=>p.spouseId&&p.id<p.spouseId).length,ne=new Set(f.members.filter(p=>p.country).map(p=>p.country)).size;_("statsBar").innerHTML='<div class="st-chip"><b>'+f.members.length+'</b> members</div><div class="st-chip"><b>'+Object.keys(Tt).length+'</b> gen</div><div class="st-chip"><b>'+Me+"</b> couples</div>"+(ne?'<div class="st-chip"><b>'+ne+"</b> countries</div>":""),ja(c)}function ue(){const l=Object.keys(f.lastPos);if(!l.length)return;let h=1/0,s=1/0,c=-1/0,u=-1/0;l.forEach(tt=>{const z=f.lastPos[tt];h=Math.min(h,z.x),s=Math.min(s,z.y),c=Math.max(c,z.x+z.w),u=Math.max(u,z.y+z.h)});const b=_("treeView").getBoundingClientRect(),S=50,N=c-h+S*2,w=u-s+S*2;f.scale=Math.min(b.width/N,b.height/w,1.5),f.scale=Math.max(.08,f.scale),f.panX=(b.width-(c+h)*f.scale)/2,f.panY=(b.height-(u+s)*f.scale)/2,Lt()}function Va(){f.scale=Math.min(5,f.scale*1.25),Lt()}function Ya(){f.scale=Math.max(.06,f.scale*.8),Lt()}function qa(){f.members.forEach(l=>ee.add(l.id)),Lt(),ue()}function Ja(){ee.clear(),Lt(),ue()}function Xa(){const l=_("treeView");l.addEventListener("mousedown",h=>{h.target.closest(".nd")||h.target.closest(".tog")||h.target.closest(".cb")||h.target.closest(".mm")||h.target.closest(".sf-btn")||h.target.closest(".lt-btn")||(f.isPan=!0,f.psx=h.clientX-f.panX,f.psy=h.clientY-f.panY,l.style.cursor="grabbing")}),window.addEventListener("mousemove",h=>{f.isPan&&(f.panX=h.clientX-f.psx,f.panY=h.clientY-f.psy,Lt())}),window.addEventListener("mouseup",()=>{f.isPan=!1;const h=_("treeView");h&&(h.style.cursor="")}),l.addEventListener("wheel",h=>{h.preventDefault();const s=l.getBoundingClientRect(),c=h.clientX-s.left,u=h.clientY-s.top,b=f.scale;f.scale=Math.max(.06,Math.min(5,f.scale*(h.deltaY>0?.9:1.1))),f.panX=c-(c-f.panX)*(f.scale/b),f.panY=u-(u-f.panY)*(f.scale/b),Lt()},{passive:!1}),_("minimap").addEventListener("click",h=>{const s=Object.keys(f.lastPos);if(!s.length)return;let c=1/0,u=1/0,b=-1/0,S=-1/0;s.forEach(V=>{const k=f.lastPos[V];c=Math.min(c,k.x),u=Math.min(u,k.y),b=Math.max(b,k.x+k.w),S=Math.max(S,k.y+k.h)});const N=h.currentTarget.getBoundingClientRect(),w=15,tt=b-c+w*2,z=S-u+w*2,C=c-w+(h.clientX-N.left)/N.width*tt,nt=u-w+(h.clientY-N.top)/N.height*z,ht=_("treeView").getBoundingClientRect();f.panX=ht.width/2-C*f.scale,f.panY=ht.height/2-nt*f.scale,Lt()})}const Ke={AF:[33,65],AL:[41,20],DZ:[28,3],AO:[-12.5,18.5],AR:[-34,-64],AM:[40,45],AU:[-25,134],AT:[47.5,14],AZ:[40.5,47.5],BH:[26,50.5],BD:[24,90],BY:[53,28],BE:[50.8,4.5],BJ:[9.5,2.3],BO:[-17,-65],BA:[44,18],BW:[-22,24],BR:[-10,-55],BG:[43,25],BF:[13,-1.5],BI:[-3.5,30],KH:[12.5,105],CM:[6,12.5],CA:[56,-96],CF:[7,21],TD:[15,19],CL:[-33.5,-71],CN:[35,105],CO:[4,-72],CD:[-3,24],CG:[-1,15.5],CR:[10,-84],HR:[45.2,15.5],CU:[22,-79.5],CY:[35,33],CZ:[49.8,15.5],DK:[56,10],DJ:[11.5,43],DO:[19,-70.5],EC:[-2,-77.5],EG:[27,30],SV:[13.8,-89],GQ:[1.5,10.5],ER:[15.3,39],EE:[59,26],SZ:[-26.5,31.5],ET:[8,38],FI:[64,26],FR:[46.2,2.2],GA:[-1,11.5],GM:[13.5,-16.5],GE:[42,43.5],DE:[51,10],GH:[8,-1.2],GR:[39,22],GT:[15.5,-90.3],GN:[11,-12],GW:[12,-15],GY:[5,-59],HT:[19,-72.3],HN:[15,-86.5],HU:[47,20],IS:[65,-18],IN:[22,79],ID:[-5,120],IR:[32,53],IQ:[33,44],IE:[53.5,-8],IL:[31.5,35],IT:[42.8,12.8],JM:[18.1,-77.3],JP:[36,138],JO:[31,36.5],KZ:[48,67],KE:[0,38],KW:[29.5,47.5],KG:[41,75],LA:[18,105],LV:[57,25],LB:[33.8,35.8],LS:[-29.5,28.5],LR:[6.5,-9.5],LY:[27,17],LT:[55.9,24],LU:[49.8,6.2],MG:[-20,47],MW:[-13.5,34],MY:[2.5,112.5],ML:[17,-4],MR:[20,-12],MU:[-20.3,57.6],MX:[23,-102],MA:[32,-5],MZ:[-18.3,35],MM:[19.8,96.7],NA:[-22,17],NP:[28,84],NL:[52.5,5.7],NZ:[-41.3,174.8],NI:[13,-85],NE:[17.6,8],NG:[10,8],NO:[62,10],OM:[21,57],PK:[30,70],PA:[9,-80],PY:[-23,-58],PE:[-10,-76],PH:[12,122],PL:[52,20],PT:[39.5,-8],QA:[25.3,51.2],RO:[46,25],RU:[60,100],RW:[-2,29.8],SA:[24,45],SN:[14,-14.5],RS:[44.8,20.5],SL:[8.5,-12],SG:[1.3,104],SK:[48.7,19.7],SI:[46.2,15],SO:[5,46],ZA:[-29,25],KR:[37,127.5],SS:[7.5,30],ES:[40,-4],LK:[7.5,80.8],SD:[16,30],SR:[4,-56],SE:[62,15],CH:[46.8,8.2],SY:[35,38.5],TW:[23.7,121],TZ:[-6.4,34.9],TH:[15,100.5],TG:[8.6,1.2],TT:[10.5,-61.3],TN:[34,9],TR:[39,35],TM:[40,60],UG:[1.5,32.5],UA:[49,32],AE:[24,54],GB:[54,-2],US:[38,-97],UY:[-33,-56],UZ:[41.5,64.6],VE:[8,-66],VN:[16.2,108],YE:[15.5,48.5],ZM:[-15,28.3],ZW:[-20,30]};function Qa(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ge={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var $a=Ge.exports,to;function ts(){return to||(to=1,(function(l,h){(function(s,c){c(h)})($a,(function(s){var c="1.9.4";function u(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t}var b=Object.create||(function(){function t(){}return function(e){return t.prototype=e,new t}})();function S(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var N=0;function w(t){return"_leaflet_id"in t||(t._leaflet_id=++N),t._leaflet_id}function tt(t,e,i){var n,o,a,r;return r=function(){n=!1,o&&(a.apply(i,o),o=!1)},a=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)},a}function z(t,e,i){var n=e[1],o=e[0],a=n-o;return t===n&&i?t:((t-o)%a+a)%a+o}function C(){return!1}function nt(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function ht(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return ht(t).split(/\s+/)}function k(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?b(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function Pt(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(!e||e.indexOf("?")===-1?"?":"&")+n.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function Te(t,e){return t.replace(U,function(i,n){var o=e[n];if(o===void 0)throw new Error("No value provided for variable "+i);return typeof o=="function"&&(o=o(e)),o})}var Tt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Me(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var ne="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var y=0;function x(t){var e=+new Date,i=Math.max(0,16-(e-y));return y=e+i,window.setTimeout(t,i)}var T=window.requestAnimationFrame||p("RequestAnimationFrame")||x,Y=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function O(t,e,i){if(i&&T===x)t.call(e);else return T.call(window,S(t,e))}function A(t){t&&Y.call(window,t)}var et={__proto__:null,extend:u,create:b,bind:S,get lastId(){return N},stamp:w,throttle:tt,wrapNum:z,falseFn:C,formatNum:nt,trim:ht,splitWords:V,setOptions:k,getParamString:Pt,template:Te,isArray:Tt,indexOf:Me,emptyImageUrl:ne,requestFn:T,cancelFn:Y,requestAnimFrame:O,cancelAnimFrame:A};function Q(){}Q.extend=function(t){var e=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=b(i);n.constructor=e,e.prototype=n;for(var o in this)Object.prototype.hasOwnProperty.call(this,o)&&o!=="prototype"&&o!=="__super__"&&(e[o]=this[o]);return t.statics&&u(e,t.statics),t.includes&&(mt(t.includes),u.apply(null,[n].concat(t.includes))),u(n,t),delete n.statics,delete n.includes,n.options&&(n.options=i.options?b(i.options):{},u(n.options,t.options)),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,r=n._initHooks.length;a<r;a++)n._initHooks[a].call(this)}},e},Q.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},Q.mergeOptions=function(t){return u(this.prototype.options,t),this},Q.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function mt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Tt(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(t,e,i){if(typeof t=="object")for(var n in t)this._on(n,t[n],e);else{t=V(t);for(var o=0,a=t.length;o<a;o++)this._on(t[o],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var n in t)this._off(n,t[n],e);else{t=V(t);for(var o=arguments.length===1,a=0,r=t.length;a<r;a++)o?this._off(t[a]):this._off(t[a],e,i)}return this},_on:function(t,e,i,n){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var o={fn:e,ctx:i};n&&(o.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(o)}},_off:function(t,e,i){var n,o,a;if(this._events&&(n=this._events[t],!!n)){if(arguments.length===1){if(this._firingCount)for(o=0,a=n.length;o<a;o++)n[o].fn=C;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var r=this._listens(t,e,i);if(r!==!1){var d=n[r];this._firingCount&&(d.fn=C,this._events[t]=n=n.slice()),n.splice(r,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,r=o.length;a<r;a++){var d=o[a],m=d.fn;d.once&&this.off(t,m,d.ctx),m.call(d.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e,i,n){typeof t!="string"&&console.warn('"string" type argument expected');var o=e;typeof e!="function"&&(n=!!e,o=void 0,i=void 0);var a=this._events&&this._events[t];if(a&&a.length&&this._listens(t,o,i)!==!1)return!0;if(n){for(var r in this._eventParents)if(this._eventParents[r].listens(t,e,i,n))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var n=this._events[t]||[];if(!e)return!!n.length;i===this&&(i=void 0);for(var o=0,a=n.length;o<a;o++)if(n[o].fn===e&&n[o].ctx===i)return o;return!1},once:function(t,e,i){if(typeof t=="object")for(var n in t)this._on(n,t[n],e,!0);else{t=V(t);for(var o=0,a=t.length;o<a;o++)this._on(t[o],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[w(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[w(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var G=Q.extend($);function g(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var Z=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};g.prototype={clone:function(){return new g(this.x,this.y)},add:function(t){return this.clone()._add(E(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(E(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new g(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new g(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Z(this.x),this.y=Z(this.y),this},distanceTo:function(t){t=E(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=E(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=E(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+nt(this.x)+", "+nt(this.y)+")"}};function E(t,e,i){return t instanceof g?t:Tt(t)?new g(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new g(t.x,t.y):new g(t,e,i)}function ot(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}ot.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof g||typeof t[0]=="number"||"x"in t)e=i=E(t);else if(t=vt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return E(this.min.x,this.max.y)},getTopRight:function(){return E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof g?t=E(t):t=vt(t),t instanceof ot?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=vt(t);var e=this.min,i=this.max,n=t.min,o=t.max,a=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return a&&r},overlaps:function(t){t=vt(t);var e=this.min,i=this.max,n=t.min,o=t.max,a=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return a&&r},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,n=Math.abs(e.x-i.x)*t,o=Math.abs(e.y-i.y)*t;return vt(E(e.x-n,e.y-o),E(i.x+n,i.y+o))},equals:function(t){return t?(t=vt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function vt(t,e){return!t||t instanceof ot?t:new ot(t,e)}function _t(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}_t.prototype={extend:function(t){var e=this._southWest,i=this._northEast,n,o;if(t instanceof q)n=t,o=t;else if(t instanceof _t){if(n=t._southWest,o=t._northEast,!n||!o)return this}else return t?this.extend(D(t)||st(t)):this;return!e&&!i?(this._southWest=new q(n.lat,n.lng),this._northEast=new q(o.lat,o.lng)):(e.lat=Math.min(n.lat,e.lat),e.lng=Math.min(n.lng,e.lng),i.lat=Math.max(o.lat,i.lat),i.lng=Math.max(o.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new _t(new q(e.lat-n,e.lng-o),new q(i.lat+n,i.lng+o))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof q||"lat"in t?t=D(t):t=st(t);var e=this._southWest,i=this._northEast,n,o;return t instanceof _t?(n=t.getSouthWest(),o=t.getNorthEast()):n=o=t,n.lat>=e.lat&&o.lat<=i.lat&&n.lng>=e.lng&&o.lng<=i.lng},intersects:function(t){t=st(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return a&&r},overlaps:function(t){t=st(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return a&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=st(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function st(t,e){return t instanceof _t?t:new _t(t,e)}function q(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}q.prototype={equals:function(t,e){if(!t)return!1;t=D(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+nt(this.lat,t)+", "+nt(this.lng,t)+")"},distanceTo:function(t){return Ct.distance(this,D(t))},wrap:function(){return Ct.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return st([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new q(this.lat,this.lng,this.alt)}};function D(t,e,i){return t instanceof q?t:Tt(t)&&typeof t[0]!="object"?t.length===3?new q(t[0],t[1],t[2]):t.length===2?new q(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new q(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new q(t,e,i)}var St={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),o=this.transformation.transform(e.max,i);return new ot(n,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?z(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?z(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return new q(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(n===0&&o===0)return t;var a=t.getSouthWest(),r=t.getNorthEast(),d=new q(a.lat-n,a.lng-o),m=new q(r.lat-n,r.lng-o);return new _t(d,m)}},Ct=u({},St,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,a=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),d=a*a+Math.cos(n)*Math.cos(o)*r*r,m=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return this.R*m}}),qt=6378137,Gt={R:qt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new g(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(function(){var t=qt*Math.PI;return new ot([-t,-t],[t,t])})()};function Ue(t,e,i,n){if(Tt(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=n}Ue.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new g((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Jt(t,e,i,n){return new Ue(t,e,i,n)}var oe=u({},Ct,{code:"EPSG:3857",projection:Gt,transformation:(function(){var t=.5/(Math.PI*Gt.R);return Jt(t,.5,-t,.5)})()}),je=u({},oe,{code:"EPSG:900913"});function Ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Se(t,e){var i="",n,o,a,r,d,m;for(n=0,a=t.length;n<a;n++){for(d=t[n],o=0,r=d.length;o<r;o++)m=d[o],i+=(o?"L":"M")+m.x+" "+m.y;i+=e?I.svg?"z":"x":""}return i||"M0 0"}var M=document.documentElement.style,X="ActiveXObject"in window,yt=X&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),ut=Ot("webkit"),Xt=Ot("android"),ce=Ot("android 2")||Ot("android 3"),vo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yo=Xt&&Ot("Google")&&vo<537&&!("AudioNode"in window),mi=!!window.opera,Ui=!it&&Ot("chrome"),ji=Ot("gecko")&&!ut&&!mi&&!X,wo=!Ui&&Ot("safari"),Vi=Ot("phantom"),Yi="OTransition"in M,xo=navigator.platform.indexOf("Win")===0,qi=X&&"transition"in M,pi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ce,Ji="MozPerspective"in M,bo=!window.L_DISABLE_3D&&(qi||pi||Ji)&&!Yi&&!Vi,Ce=typeof orientation<"u"||Ot("mobile"),Lo=Ce&&ut,Po=Ce&&pi,Xi=!window.PointerEvent&&window.MSPointerEvent,Qi=!!(window.PointerEvent||Xi),$i="ontouchstart"in window||!!window.TouchEvent,To=!window.L_NO_TOUCH&&($i||Qi),Mo=Ce&&mi,So=Ce&&ji,Co=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Io=(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",C,e),window.removeEventListener("testPassiveEventSupport",C,e)}catch{}return t})(),ko=(function(){return!!document.createElement("canvas").getContext})(),_i=!!(document.createElementNS&&Ve("svg").createSVGRect),Eo=!!_i&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Bo=!_i&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}})(),Ao=navigator.platform.indexOf("Mac")===0,zo=navigator.platform.indexOf("Linux")===0;function Ot(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var I={ie:X,ielt9:yt,edge:it,webkit:ut,android:Xt,android23:ce,androidStock:yo,opera:mi,chrome:Ui,gecko:ji,safari:wo,phantom:Vi,opera12:Yi,win:xo,ie3d:qi,webkit3d:pi,gecko3d:Ji,any3d:bo,mobile:Ce,mobileWebkit:Lo,mobileWebkit3d:Po,msPointer:Xi,pointer:Qi,touch:To,touchNative:$i,mobileOpera:Mo,mobileGecko:So,retina:Co,passiveEvents:Io,canvas:ko,svg:_i,vml:Bo,inlineSvg:Eo,mac:Ao,linux:zo},tn=I.msPointer?"MSPointerDown":"pointerdown",en=I.msPointer?"MSPointerMove":"pointermove",nn=I.msPointer?"MSPointerUp":"pointerup",on=I.msPointer?"MSPointerCancel":"pointercancel",gi={touchstart:tn,touchmove:en,touchend:nn,touchcancel:on},an={touchstart:Ho,touchmove:Ye,touchend:Ye,touchcancel:Ye},de={},sn=!1;function Oo(t,e,i){return e==="touchstart"&&Do(),an[e]?(i=an[e].bind(this,i),t.addEventListener(gi[e],i,!1),i):(console.warn("wrong event specified:",e),C)}function No(t,e,i){if(!gi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(gi[e],i,!1)}function Zo(t){de[t.pointerId]=t}function Ro(t){de[t.pointerId]&&(de[t.pointerId]=t)}function rn(t){delete de[t.pointerId]}function Do(){sn||(document.addEventListener(tn,Zo,!0),document.addEventListener(en,Ro,!0),document.addEventListener(nn,rn,!0),document.addEventListener(on,rn,!0),sn=!0)}function Ye(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in de)e.touches.push(de[i]);e.changedTouches=[e],t(e)}}function Ho(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&gt(e),Ye(t,e)}function Go(t){var e={},i,n;for(n in t)i=t[n],e[n]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ko=200;function Fo(t,e){t.addEventListener("dblclick",e);var i=0,n;function o(a){if(a.detail!==1){n=a.detail;return}if(!(a.pointerType==="mouse"||a.sourceCapabilities&&!a.sourceCapabilities.firesTouchEvents)){var r=dn(a);if(!(r.some(function(m){return m instanceof HTMLLabelElement&&m.attributes.for})&&!r.some(function(m){return m instanceof HTMLInputElement||m instanceof HTMLSelectElement}))){var d=Date.now();d-i<=Ko?(n++,n===2&&e(Go(a))):n=1,i=d}}}return t.addEventListener("click",o),{dblclick:e,simDblclick:o}}function Wo(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var vi=Xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ie=Xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hn=Ie==="webkitTransition"||Ie==="OTransition"?Ie+"End":"transitionend";function ln(t){return typeof t=="string"?document.getElementById(t):t}function ke(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return i==="auto"?null:i}function J(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function rt(t){var e=t.parentNode;e&&e.removeChild(t)}function qe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function fe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function me(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function yi(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=Je(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function H(t,e){if(t.classList!==void 0)for(var i=V(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!yi(t,e)){var a=Je(t);wi(t,(a?a+" ":"")+e)}}function lt(t,e){t.classList!==void 0?t.classList.remove(e):wi(t,ht((" "+Je(t)+" ").replace(" "+e+" "," ")))}function wi(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Je(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function It(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Uo(t,e)}function Uo(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function Xe(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function ae(t,e,i){var n=e||new g(0,0);t.style[vi]=(I.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ct(t,e){t._leaflet_pos=e,I.any3d?ae(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function se(t){return t._leaflet_pos||new g(0,0)}var Ee,Be,xi;if("onselectstart"in document)Ee=function(){R(window,"selectstart",gt)},Be=function(){at(window,"selectstart",gt)};else{var Ae=Xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ee=function(){if(Ae){var t=document.documentElement.style;xi=t[Ae],t[Ae]="none"}},Be=function(){Ae&&(document.documentElement.style[Ae]=xi,xi=void 0)}}function bi(){R(window,"dragstart",gt)}function Li(){at(window,"dragstart",gt)}var Qe,Pi;function Ti(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&($e(),Qe=t,Pi=t.style.outlineStyle,t.style.outlineStyle="none",R(window,"keydown",$e))}function $e(){Qe&&(Qe.style.outlineStyle=Pi,Qe=void 0,Pi=void 0,at(window,"keydown",$e))}function un(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Mi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var jo={__proto__:null,TRANSFORM:vi,TRANSITION:Ie,TRANSITION_END:hn,get:ln,getStyle:ke,create:J,remove:rt,empty:qe,toFront:fe,toBack:me,hasClass:yi,addClass:H,removeClass:lt,setClass:wi,getClass:Je,setOpacity:It,testProp:Xe,setTransform:ae,setPosition:ct,getPosition:se,get disableTextSelection(){return Ee},get enableTextSelection(){return Be},disableImageDrag:bi,enableImageDrag:Li,preventOutline:Ti,restoreOutline:$e,getSizedParentNode:un,getScale:Mi};function R(t,e,i,n){if(e&&typeof e=="object")for(var o in e)Ci(t,o,e[o],i);else{e=V(e);for(var a=0,r=e.length;a<r;a++)Ci(t,e[a],i,n)}return this}var Nt="_leaflet_events";function at(t,e,i,n){if(arguments.length===1)cn(t),delete t[Nt];else if(e&&typeof e=="object")for(var o in e)Ii(t,o,e[o],i);else if(e=V(e),arguments.length===2)cn(t,function(d){return Me(e,d)!==-1});else for(var a=0,r=e.length;a<r;a++)Ii(t,e[a],i,n);return this}function cn(t,e){for(var i in t[Nt]){var n=i.split(/\d/)[0];(!e||e(n))&&Ii(t,n,null,null,i)}}var Si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ci(t,e,i,n){var o=e+w(i)+(n?"_"+w(n):"");if(t[Nt]&&t[Nt][o])return this;var a=function(d){return i.call(n||t,d||window.event)},r=a;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?a=Oo(t,e,a):I.touch&&e==="dblclick"?a=Fo(t,a):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Si[e]||e,a,I.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(a=function(d){d=d||window.event,Ei(t,d)&&r(d)},t.addEventListener(Si[e],a,!1)):t.addEventListener(e,r,!1):t.attachEvent("on"+e,a),t[Nt]=t[Nt]||{},t[Nt][o]=a}function Ii(t,e,i,n,o){o=o||e+w(i)+(n?"_"+w(n):"");var a=t[Nt]&&t[Nt][o];if(!a)return this;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?No(t,e,a):I.touch&&e==="dblclick"?Wo(t,a):"removeEventListener"in t?t.removeEventListener(Si[e]||e,a,!1):t.detachEvent("on"+e,a),t[Nt][o]=null}function re(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ki(t){return Ci(t,"wheel",re),this}function ze(t){return R(t,"mousedown touchstart dblclick contextmenu",re),t._leaflet_disable_click=!0,this}function gt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function he(t){return gt(t),re(t),this}function dn(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function fn(t,e){if(!e)return new g(t.clientX,t.clientY);var i=Mi(e),n=i.boundingClientRect;return new g((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Vo=I.linux&&I.chrome?window.devicePixelRatio:I.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mn(t){return I.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Vo:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ei(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var Yo={__proto__:null,on:R,off:at,stopPropagation:re,disableScrollPropagation:ki,disableClickPropagation:ze,preventDefault:gt,stop:he,getPropagationPath:dn,getMousePosition:fn,getWheelDelta:mn,isExternalTarget:Ei,addListener:R,removeListener:at},pn=G.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=se(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ct(this._el,i),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),W=G.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=k(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=S(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(D(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ie&&I.any3d&&!I.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),R(this._proxy,hn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(D(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=u({animate:i.animate},i.zoom),i.pan=u({animate:i.animate,duration:i.duration},i.pan));var n=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),a=t instanceof g?t:this.latLngToContainerPoint(t),r=a.subtract(o).multiplyBy(1-1/n),d=this.containerPointToLatLng(o.add(r));return this.setView(d,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():st(t);var i=E(e.paddingTopLeft||e.padding||[0,0]),n=E(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if(o=typeof e.maxZoom=="number"?Math.min(e.maxZoom,o):o,o===1/0)return{center:t.getCenter(),zoom:o};var a=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),d=this.project(t.getNorthEast(),o),m=this.unproject(r.add(d).divideBy(2).add(a),o);return{center:m,zoom:o}},fitBounds:function(t,e){if(t=st(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=E(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){H(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!I.any3d)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),a=this.getSize(),r=this._zoom;t=D(t),e=e===void 0?r:e;var d=Math.max(a.x,a.y),m=d*this.getZoomScale(r,e),v=o.distanceTo(n)||1,P=1.42,B=P*P;function K(dt){var ci=dt?-1:1,Na=dt?m:d,Za=m*m-d*d+ci*B*B*v*v,Ra=2*Na*B*v,Ki=Za/Ra,qn=Math.sqrt(Ki*Ki+1)-Ki,Da=qn<1e-9?-18:Math.log(qn);return Da}function wt(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function pt(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function Et(dt){return wt(dt)/pt(dt)}var Mt=K(0);function we(dt){return d*(pt(Mt)/pt(Mt+P*dt))}function Ba(dt){return d*(pt(Mt)*Et(Mt+P*dt)-wt(Mt))/B}function Aa(dt){return 1-Math.pow(1-dt,1.5)}var za=Date.now(),Vn=(K(1)-Mt)/P,Oa=i.duration?1e3*i.duration:1e3*Vn*.8;function Yn(){var dt=(Date.now()-za)/Oa,ci=Aa(dt)*Vn;dt<=1?(this._flyToFrame=O(Yn,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(Ba(ci)/v)),r),this.getScaleZoom(d/we(ci),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),Yn.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=st(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,st(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=E(e.paddingTopLeft||e.padding||[0,0]),n=E(e.paddingBottomRight||e.padding||[0,0]),o=this.project(this.getCenter()),a=this.project(t),r=this.getPixelBounds(),d=vt([r.min.add(i),r.max.subtract(n)]),m=d.getSize();if(!d.contains(a)){this._enforcingBounds=!0;var v=a.subtract(d.getCenter()),P=d.extend(a).getSize().subtract(m);o.x+=v.x<0?-P.x:P.x,o.y+=v.y<0?-P.y:P.y,this.panTo(this.unproject(o),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),a=n.subtract(o);return!a.x&&!a.y?this:(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(S(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=S(this._handleGeolocationResponse,this),i=S(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,n=new q(e,i),o=n.toBounds(t.coords.accuracy*2),a=this._locateOptions;if(a.setView){var r=this.getBoundsZoom(o);this.setView(n,a.maxZoom?Math.min(r,a.maxZoom):r)}var d={latlng:n,bounds:o,timestamp:t.timestamp};for(var m in t.coords)typeof t.coords[m]=="number"&&(d[m]=t.coords[m]);this.fire("locationfound",d)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)rt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=J("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new _t(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=st(t),i=E(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),a=this.getMaxZoom(),r=t.getNorthWest(),d=t.getSouthEast(),m=this.getSize().subtract(i),v=vt(this.project(d,n),this.project(r,n)).getSize(),P=I.any3d?this.options.zoomSnap:1,B=m.x/v.x,K=m.y/v.y,wt=e?Math.max(B,K):Math.min(B,K);return n=this.getScaleZoom(wt,n),P&&(n=Math.round(n/(P/100))*(P/100),n=e?Math.ceil(n/P)*P:Math.floor(n/P)*P),Math.max(o,Math.min(a,n))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new g(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new ot(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(D(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(E(t),e)},layerPointToLatLng:function(t){var e=E(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(D(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(D(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(st(t))},distance:function(t,e){return this.options.crs.distance(D(t),D(e))},containerPointToLayerPoint:function(t){return E(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return E(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(E(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(D(t)))},mouseEventToContainerPoint:function(t){return fn(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ln(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");R(e,"scroll",this._onScroll,this),this._containerId=w(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&I.any3d,H(t,"leaflet-container"+(I.touch?" leaflet-touch":"")+(I.retina?" leaflet-retina":"")+(I.ielt9?" leaflet-oldie":"")+(I.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ke(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new g(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(H(t.markerPane,"leaflet-zoom-hide"),H(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){ct(this._mapPane,new g(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o,i)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,n){e===void 0&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n?i&&i.pinch&&this.fire("zoom",i):((o||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ct(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[w(this._container)]=this;var e=t?at:R;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),I.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],n,o=e==="mouseout"||e==="mouseover",a=t.target||t.srcElement,r=!1;a;){if(n=this._targets[w(a)],n&&(e==="click"||e==="preclick")&&this._draggableMoved(n)){r=!0;break}if(n&&n.listens(e,!0)&&(o&&!Ei(a,t)||(i.push(n),o))||a===this._container)break;a=a.parentNode}return!i.length&&!r&&!o&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&Ti(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var n=u({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}var o=this._findEventTargets(t,e);if(i){for(var a=[],r=0;r<i.length;r++)i[r].listens(e,!0)&&a.push(i[r]);o=a.concat(o)}if(o.length){e==="contextmenu"&&gt(t);var d=o[0],m={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var v=d.getLatLng&&(!d._radius||d._radius<=10);m.containerPoint=v?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(t),m.layerPoint=this.containerPointToLayerPoint(m.containerPoint),m.latlng=v?d.getLatLng():this.layerPointToLatLng(m.layerPoint)}for(r=0;r<o.length;r++)if(o[r].fire(e,m,!0),m.originalEvent._stopped||o[r].options.bubblingMouseEvents===!1&&Me(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return se(this._mapPane)||new g(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return vt([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),a=new ot(n.subtract(o),n.add(o)),r=this._getBoundsOffset(a,i,e);return Math.abs(r.x)<=1&&Math.abs(r.y)<=1?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new ot(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=vt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),a=n.max.subtract(t.max),r=this._rebound(o.x,-a.x),d=this._rebound(o.y,-a.y);return new g(r,d)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=I.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=J("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=vi,n=this._proxy.style[i];ae(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ae(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return i.animate!==!0&&!this.getSize().contains(o)?!1:(O(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,H(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(S(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qo(t,e){return new W(t,e)}var Bt=Q.extend({options:{position:"topright"},initialize:function(t){k(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return H(e,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Oe=function(t){return new Bt(t)};W.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=J("div",e+"control-container",this._container);function n(o,a){var r=e+o+" "+e+a;t[o+a]=J("div",r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)rt(this._controlCorners[t]);rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _n=Bt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){k(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Bt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(w(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){H(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(H(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=J("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ze(e),ki(e);var n=this._section=J("section",t+"-list");i&&(this._map.on("click",this.collapse,this),R(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=J("a",t+"-toggle",e);o.href="#",o.title="Layers",o.setAttribute("role","button"),R(o,{keydown:function(a){a.keyCode===13&&this._expandSafely()},click:function(a){gt(a),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=J("div",t+"-base",n),this._separator=J("div",t+"-separator",n),this._overlaysList=J("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&w(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(S(function(n,o){return this.options.sortFunction(n.layer,o.layer,n.name,o.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qe(this._baseLayersList),qe(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(w(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),n;t.overlay?(n=document.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=i):n=this._createRadioElement("leaflet-base-layers_"+w(this),i),this._layerControlInputs.push(n),n.layerId=w(t.layer),R(n,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var a=document.createElement("span");e.appendChild(a),a.appendChild(n),a.appendChild(o);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,n=[],o=[];this._handlingClick=!0;for(var a=t.length-1;a>=0;a--)e=t[a],i=this._getLayer(e.layerId).layer,e.checked?n.push(i):e.checked||o.push(i);for(a=0;a<o.length;a++)this._map.hasLayer(o[a])&&this._map.removeLayer(o[a]);for(a=0;a<n.length;a++)this._map.hasLayer(n[a])||this._map.addLayer(n[a]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,n=this._map.getZoom(),o=t.length-1;o>=0;o--)e=t[o],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&n<i.options.minZoom||i.options.maxZoom!==void 0&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,R(t,"click",gt),this.expand();var e=this;setTimeout(function(){at(t,"click",gt),e._preventClick=!1})}}),Jo=function(t,e,i){return new _n(t,e,i)},Bi=Bt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=J("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var a=J("a",i,n);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),ze(a),R(a,"click",he),R(a,"click",o,this),R(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";lt(this._zoomInButton,e),lt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(H(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(H(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});W.mergeOptions({zoomControl:!0}),W.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var Xo=function(t){return new Bi(t)},gn=Bt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=J("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=J("div",e,i)),t.imperial&&(this._iScale=J("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,n,o;e>5280?(i=e/5280,n=this._getRoundNum(i),this._updateScale(this._iScale,n+" mi",n/i)):(o=this._getRoundNum(e),this._updateScale(this._iScale,o+" ft",o/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Qo=function(t){return new gn(t)},$o='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ai=Bt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(I.inlineSvg?$o+" ":"")+"Leaflet</a>"},initialize:function(t){k(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=J("div","leaflet-control-attribution"),ze(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});W.mergeOptions({attributionControl:!0}),W.addInitHook(function(){this.options.attributionControl&&new Ai().addTo(this)});var ta=function(t){return new Ai(t)};Bt.Layers=_n,Bt.Zoom=Bi,Bt.Scale=gn,Bt.Attribution=Ai,Oe.layers=Jo,Oe.zoom=Xo,Oe.scale=Qo,Oe.attribution=ta;var Zt=Q.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zt.addTo=function(t,e){return t.addHandler(e,this),this};var ea={Events:$},vn=I.touch?"touchstart mousedown":"mousedown",Qt=G.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){k(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(R(this._dragStartTarget,vn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qt._dragging===this&&this.finishDrag(!0),at(this._dragStartTarget,vn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!yi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Qt._dragging===this&&this.finishDrag();return}if(!(Qt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Qt._dragging=this,this._preventOutline&&Ti(this._element),bi(),Ee(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=un(this._element);this._startPoint=new g(e.clientX,e.clientY),this._startPos=se(this._element),this._parentScale=Mi(i);var n=t.type==="mousedown";R(document,n?"mousemove":"touchmove",this._onMove,this),R(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new g(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,gt(t),this._moved||(this.fire("dragstart"),this._moved=!0,H(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),H(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ct(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){lt(document.body,"leaflet-dragging"),this._lastTarget&&(lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),at(document,"mousemove touchmove",this._onMove,this),at(document,"mouseup touchend touchcancel",this._onUp,this),Li(),Be();var e=this._moved&&this._moving;this._moving=!1,Qt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function yn(t,e,i){var n,o=[1,4,2,8],a,r,d,m,v,P,B,K;for(a=0,P=t.length;a<P;a++)t[a]._code=le(t[a],e);for(d=0;d<4;d++){for(B=o[d],n=[],a=0,P=t.length,r=P-1;a<P;r=a++)m=t[a],v=t[r],m._code&B?v._code&B||(K=ti(v,m,B,e,i),K._code=le(K,e),n.push(K)):(v._code&B&&(K=ti(v,m,B,e,i),K._code=le(K,e),n.push(K)),n.push(m));t=n}return t}function wn(t,e){var i,n,o,a,r,d,m,v,P;if(!t||t.length===0)throw new Error("latlngs not passed");kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var B=D([0,0]),K=st(t),wt=K.getNorthWest().distanceTo(K.getSouthWest())*K.getNorthEast().distanceTo(K.getNorthWest());wt<1700&&(B=zi(t));var pt=t.length,Et=[];for(i=0;i<pt;i++){var Mt=D(t[i]);Et.push(e.project(D([Mt.lat-B.lat,Mt.lng-B.lng])))}for(d=m=v=0,i=0,n=pt-1;i<pt;n=i++)o=Et[i],a=Et[n],r=o.y*a.x-a.y*o.x,m+=(o.x+a.x)*r,v+=(o.y+a.y)*r,d+=r*3;d===0?P=Et[0]:P=[m/d,v/d];var we=e.unproject(E(P));return D([we.lat+B.lat,we.lng+B.lng])}function zi(t){for(var e=0,i=0,n=0,o=0;o<t.length;o++){var a=D(t[o]);e+=a.lat,i+=a.lng,n++}return D([e/n,i/n])}var ia={__proto__:null,clipPolygon:yn,polygonCenter:wn,centroid:zi};function xn(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=aa(t,i),t=oa(t,i),t}function bn(t,e,i){return Math.sqrt(Ne(t,e,i,!0))}function na(t,e,i){return Ne(t,e,i)}function oa(t,e){var i=t.length,n=typeof Uint8Array<"u"?Uint8Array:Array,o=new n(i);o[0]=o[i-1]=1,Oi(t,o,e,0,i-1);var a,r=[];for(a=0;a<i;a++)o[a]&&r.push(t[a]);return r}function Oi(t,e,i,n,o){var a=0,r,d,m;for(d=n+1;d<=o-1;d++)m=Ne(t[d],t[n],t[o],!0),m>a&&(r=d,a=m);a>i&&(e[r]=1,Oi(t,e,i,n,r),Oi(t,e,i,r,o))}function aa(t,e){for(var i=[t[0]],n=1,o=0,a=t.length;n<a;n++)sa(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<a-1&&i.push(t[a-1]),i}var Ln;function Pn(t,e,i,n,o){var a=n?Ln:le(t,i),r=le(e,i),d,m,v;for(Ln=r;;){if(!(a|r))return[t,e];if(a&r)return!1;d=a||r,m=ti(t,e,d,i,o),v=le(m,i),d===a?(t=m,a=v):(e=m,r=v)}}function ti(t,e,i,n,o){var a=e.x-t.x,r=e.y-t.y,d=n.min,m=n.max,v,P;return i&8?(v=t.x+a*(m.y-t.y)/r,P=m.y):i&4?(v=t.x+a*(d.y-t.y)/r,P=d.y):i&2?(v=m.x,P=t.y+r*(m.x-t.x)/a):i&1&&(v=d.x,P=t.y+r*(d.x-t.x)/a),new g(v,P,o)}function le(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function sa(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Ne(t,e,i,n){var o=e.x,a=e.y,r=i.x-o,d=i.y-a,m=r*r+d*d,v;return m>0&&(v=((t.x-o)*r+(t.y-a)*d)/m,v>1?(o=i.x,a=i.y):v>0&&(o+=r*v,a+=d*v)),r=t.x-o,d=t.y-a,n?r*r+d*d:new g(o,a)}function kt(t){return!Tt(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Tn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),kt(t)}function Mn(t,e){var i,n,o,a,r,d,m,v;if(!t||t.length===0)throw new Error("latlngs not passed");kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var P=D([0,0]),B=st(t),K=B.getNorthWest().distanceTo(B.getSouthWest())*B.getNorthEast().distanceTo(B.getNorthWest());K<1700&&(P=zi(t));var wt=t.length,pt=[];for(i=0;i<wt;i++){var Et=D(t[i]);pt.push(e.project(D([Et.lat-P.lat,Et.lng-P.lng])))}for(i=0,n=0;i<wt-1;i++)n+=pt[i].distanceTo(pt[i+1])/2;if(n===0)v=pt[0];else for(i=0,a=0;i<wt-1;i++)if(r=pt[i],d=pt[i+1],o=r.distanceTo(d),a+=o,a>n){m=(a-n)/o,v=[d.x-m*(d.x-r.x),d.y-m*(d.y-r.y)];break}var Mt=e.unproject(E(v));return D([Mt.lat+P.lat,Mt.lng+P.lng])}var ra={__proto__:null,simplify:xn,pointToSegmentDistance:bn,closestPointOnSegment:na,clipSegment:Pn,_getEdgeIntersection:ti,_getBitCode:le,_sqClosestPointOnSegment:Ne,isFlat:kt,_flat:Tn,polylineCenter:Mn},Ni={project:function(t){return new g(t.lng,t.lat)},unproject:function(t){return new q(t.y,t.x)},bounds:new ot([-180,-90],[180,90])},Zi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ot([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,a=Math.sqrt(1-o*o),r=a*Math.sin(n),d=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),a/2);return n=-i*Math.log(Math.max(d,1e-10)),new g(t.lng*e*i,n)},unproject:function(t){for(var e=180/Math.PI,i=this.R,n=this.R_MINOR/i,o=Math.sqrt(1-n*n),a=Math.exp(-t.y/i),r=Math.PI/2-2*Math.atan(a),d=0,m=.1,v;d<15&&Math.abs(m)>1e-7;d++)v=o*Math.sin(r),v=Math.pow((1-v)/(1+v),o/2),m=Math.PI/2-2*Math.atan(a*v)-r,r+=m;return new q(r*e,t.x*e/i)}},ha={__proto__:null,LonLat:Ni,Mercator:Zi,SphericalMercator:Gt},la=u({},Ct,{code:"EPSG:3395",projection:Zi,transformation:(function(){var t=.5/(Math.PI*Zi.R);return Jt(t,.5,-t,.5)})()}),Sn=u({},Ct,{code:"EPSG:4326",projection:Ni,transformation:Jt(1/180,1,-1/180,.5)}),ua=u({},St,{projection:Ni,transformation:Jt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});St.Earth=Ct,St.EPSG3395=la,St.EPSG3857=oe,St.EPSG900913=je,St.EPSG4326=Sn,St.Simple=ua;var At=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[w(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[w(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});W.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=w(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=w(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return w(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?Tt(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[w(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=w(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=o.minZoom===void 0?t:Math.min(t,o.minZoom),e=o.maxZoom===void 0?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pe=At.extend({initialize:function(t,e){k(this,e),this._layers={};var i,n;if(t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers)n=this._layers[i],n[t]&&n[t].apply(n,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return w(t)}}),ca=function(t,e){return new pe(t,e)},Kt=pe.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),pe.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),pe.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new _t;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),da=function(t,e){return new Kt(t,e)},_e=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){k(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(n,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];typeof n=="number"&&(n=[n,n]);var o=E(n),a=E(e==="shadow"&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return I.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function fa(t){return new _e(t)}var Ze=_e.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ze.imagePath!="string"&&(Ze.imagePath=this._detectIconPath()),(this.options.imagePath||Ze.imagePath)+_e.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,n,o){var a=n.exec(i);return a&&a[o]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=J("div","leaflet-default-icon-path",document.body),e=ke(t,"background-image")||ke(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Cn=Zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),H(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,a=se(e._icon),r=i.getPixelBounds(),d=i.getPixelOrigin(),m=vt(r.min._subtract(d).add(o),r.max._subtract(d).subtract(o));if(!m.contains(a)){var v=E((Math.max(m.max.x,a.x)-m.max.x)/(r.max.x-m.max.x)-(Math.min(m.min.x,a.x)-m.min.x)/(r.min.x-m.min.x),(Math.max(m.max.y,a.y)-m.max.y)/(r.max.y-m.max.y)-(Math.min(m.min.y,a.y)-m.min.y)/(r.min.y-m.min.y)).multiplyBy(n);i.panBy(v,{animate:!1}),this._draggable._newPos._add(v),this._draggable._startPos._add(v),ct(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=O(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=se(e._icon),o=e._map.layerPointToLatLng(n);i&&ct(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ei=At.extend({options:{icon:new Ze,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){k(this,e),this._latlng=D(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=D(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),H(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&R(i,"focus",this._panOnFocus,this);var o=t.icon.createShadow(this._shadow),a=!1;o!==this._shadow&&(this._removeShadow(),a=!0),o&&(H(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&a&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(this._icon,"focus",this._panOnFocus,this),rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ct(this._icon,t),this._shadow&&ct(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(H(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&It(this._icon,t),this._shadow&&It(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?E(e.iconSize):E(0,0),n=e.iconAnchor?E(e.iconAnchor):E(0,0);t.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ma(t,e){return new ei(t,e)}var $t=At.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return k(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ii=$t.extend({options:{fill:!0,radius:10},initialize:function(t,e){k(this,e),this._latlng=D(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=D(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return $t.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new ot(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function pa(t,e){return new ii(t,e)}var Ri=ii.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=u({},i,{radius:e})),k(this,e),this._latlng=D(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:$t.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===Ct.distance){var o=Math.PI/180,a=this._mRadius/Ct.R/o,r=i.project([e+a,t]),d=i.project([e-a,t]),m=r.add(d).divideBy(2),v=i.unproject(m).lat,P=Math.acos((Math.cos(a*o)-Math.sin(e*o)*Math.sin(v*o))/(Math.cos(e*o)*Math.cos(v*o)))/o;(isNaN(P)||P===0)&&(P=a/Math.cos(Math.PI/180*e)),this._point=m.subtract(i.getPixelOrigin()),this._radius=isNaN(P)?0:m.x-i.project([v,t-P]).x,this._radiusY=m.y-r.y}else{var B=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(B).x}this._updateBounds()}});function _a(t,e,i){return new Ri(t,e,i)}var Ft=$t.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){k(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,n=Ne,o,a,r=0,d=this._parts.length;r<d;r++)for(var m=this._parts[r],v=1,P=m.length;v<P;v++){o=m[v-1],a=m[v];var B=n(t,o,a,!0);B<e&&(e=B,i=n(t,o,a))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=D(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new _t,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=kt(t),n=0,o=t.length;n<o;n++)i?(e[n]=D(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new ot;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new g(t,t);this._rawPxBounds&&(this._pxBounds=new ot([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var n=t[0]instanceof q,o=t.length,a,r;if(n){for(r=[],a=0;a<o;a++)r[a]=this._map.latLngToLayerPoint(t[a]),i.extend(r[a]);e.push(r)}else for(a=0;a<o;a++)this._projectLatlngs(t[a],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,n,o,a,r,d,m;for(i=0,o=0,a=this._rings.length;i<a;i++)for(m=this._rings[i],n=0,r=m.length;n<r-1;n++)d=Pn(m[n],m[n+1],t,n,!0),d&&(e[o]=e[o]||[],e[o].push(d[0]),(d[1]!==m[n+1]||n===r-2)&&(e[o].push(d[1]),o++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=xn(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,a,r,d,m=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,a=this._parts.length;i<a;i++)for(d=this._parts[i],n=0,r=d.length,o=r-1;n<r;o=n++)if(!(!e&&n===0)&&bn(t,d[o],d[n])<=m)return!0;return!1}});function ga(t,e){return new Ft(t,e)}Ft._flat=Tn;var ge=Ft.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ft.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof q&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ft.prototype._setLatLngs.call(this,t),kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new g(e,e);if(t=new ot(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var n=0,o=this._rings.length,a;n<o;n++)a=yn(this._rings[n],t,!0),a.length&&this._parts.push(a)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,n,o,a,r,d,m,v;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,m=this._parts.length;a<m;a++)for(i=this._parts[a],r=0,v=i.length,d=v-1;r<v;d=r++)n=i[r],o=i[d],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(e=!e);return e||Ft.prototype._containsPoint.call(this,t,!0)}});function va(t,e){return new ge(t,e)}var Wt=Kt.extend({initialize:function(t,e){k(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=Tt(t)?t:t.features,i,n,o;if(e){for(i=0,n=e.length;i<n;i++)o=e[i],(o.geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var r=ni(t,a);return r?(r.feature=si(t),r.defaultOptions=r.options,this.resetStyle(r),a.onEachFeature&&a.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ni(t,e){var i=t.type==="Feature"?t.geometry:t,n=i?i.coordinates:null,o=[],a=e&&e.pointToLayer,r=e&&e.coordsToLatLng||Di,d,m,v,P;if(!n&&!i)return null;switch(i.type){case"Point":return d=r(n),In(a,t,d,e);case"MultiPoint":for(v=0,P=n.length;v<P;v++)d=r(n[v]),o.push(In(a,t,d,e));return new Kt(o);case"LineString":case"MultiLineString":return m=oi(n,i.type==="LineString"?0:1,r),new Ft(m,e);case"Polygon":case"MultiPolygon":return m=oi(n,i.type==="Polygon"?1:2,r),new ge(m,e);case"GeometryCollection":for(v=0,P=i.geometries.length;v<P;v++){var B=ni({geometry:i.geometries[v],type:"Feature",properties:t.properties},e);B&&o.push(B)}return new Kt(o);case"FeatureCollection":for(v=0,P=i.features.length;v<P;v++){var K=ni(i.features[v],e);K&&o.push(K)}return new Kt(o);default:throw new Error("Invalid GeoJSON object.")}}function In(t,e,i,n){return t?t(e,i):new ei(i,n&&n.markersInheritOptions&&n)}function Di(t){return new q(t[1],t[0],t[2])}function oi(t,e,i){for(var n=[],o=0,a=t.length,r;o<a;o++)r=e?oi(t[o],e-1,i):(i||Di)(t[o]),n.push(r);return n}function Hi(t,e){return t=D(t),t.alt!==void 0?[nt(t.lng,e),nt(t.lat,e),nt(t.alt,e)]:[nt(t.lng,e),nt(t.lat,e)]}function ai(t,e,i,n){for(var o=[],a=0,r=t.length;a<r;a++)o.push(e?ai(t[a],kt(t[a])?0:e-1,i,n):Hi(t[a],n));return!e&&i&&o.length>0&&o.push(o[0].slice()),o}function ve(t,e){return t.feature?u({},t.feature,{geometry:e}):si(e)}function si(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Gi={toGeoJSON:function(t){return ve(this,{type:"Point",coordinates:Hi(this.getLatLng(),t)})}};ei.include(Gi),Ri.include(Gi),ii.include(Gi),Ft.include({toGeoJSON:function(t){var e=!kt(this._latlngs),i=ai(this._latlngs,e?1:0,!1,t);return ve(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),ge.include({toGeoJSON:function(t){var e=!kt(this._latlngs),i=e&&!kt(this._latlngs[0]),n=ai(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),ve(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),pe.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),ve(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",n=[];return this.eachLayer(function(o){if(o.toGeoJSON){var a=o.toGeoJSON(t);if(i)n.push(a.geometry);else{var r=si(a);r.type==="FeatureCollection"?n.push.apply(n,r.features):n.push(r)}}}),i?ve(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});function kn(t,e){return new Wt(t,e)}var ya=kn,ri=At.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=st(e),k(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(H(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&fe(this._image),this},bringToBack:function(){return this._map&&me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=st(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:J("img");if(H(e,"leaflet-image-layer"),this._zoomAnimated&&H(e,"leaflet-zoom-animated"),this.options.className&&H(e,this.options.className),e.onselectstart=C,e.onmousemove=C,e.onload=S(this.fire,this,"load"),e.onerror=S(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ae(this._image,i,e)},_reset:function(){var t=this._image,e=new ot(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ct(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){It(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),wa=function(t,e,i){return new ri(t,e,i)},En=ri.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:J("video");if(H(e,"leaflet-image-layer"),this._zoomAnimated&&H(e,"leaflet-zoom-animated"),this.options.className&&H(e,this.options.className),e.onselectstart=C,e.onmousemove=C,e.onloadeddata=S(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=i.length>0?n:[e.src];return}Tt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var r=J("source");r.src=this._url[a],e.appendChild(r)}}});function xa(t,e,i){return new En(t,e,i)}var Bn=ri.extend({_initImage:function(){var t=this._image=this._url;H(t,"leaflet-image-layer"),this._zoomAnimated&&H(t,"leaflet-zoom-animated"),this.options.className&&H(t,this.options.className),t.onselectstart=C,t.onmousemove=C}});function ba(t,e,i){return new Bn(t,e,i)}var Rt=At.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof q||Tt(t))?(this._latlng=D(t),k(this,e)):(k(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&It(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&It(this._container,1),this.bringToFront(),this.options.interactive&&(H(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(It(this._container,0),this._removeTimeout=setTimeout(S(rt,void 0,this._container),200)):rt(this._container),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=D(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&fe(this._container),this},bringToBack:function(){return this._map&&me(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Kt){e=null;var i=this._source._layers;for(var n in i)if(i[n]._map){e=i[n];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=E(this.options.offset),i=this._getAnchor();this._zoomAnimated?ct(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});W.include({_initOverlay:function(t,e,i,n){var o=e;return o instanceof t||(o=new t(n).setContent(e)),i&&o.setLatLng(i),o}}),At.include({_initOverlay:function(t,e,i,n){var o=i;return o instanceof t?(k(o,n),o._source=this):(o=e&&!n?e:new t(n,this),o.setContent(i)),o}});var hi=Rt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Rt.prototype.openOn.call(this,t)},onAdd:function(t){Rt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $t||this._source.on("preclick",re))},onRemove:function(t){Rt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $t||this._source.off("preclick",re))},getEvents:function(){var t=Rt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=J("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=J("div",t+"-content-wrapper",e);if(this._contentNode=J("div",t+"-content",i),ze(e),ki(this._contentNode),R(e,"contextmenu",re),this._tipContainer=J("div",t+"-tip-container",e),this._tip=J("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=J("a",t+"-close-button",e);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',R(n,"click",function(o){gt(o),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,a="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",H(t,a)):lt(t,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ct(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(ke(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new g(this._containerLeft,-i-this._containerBottom);o._add(se(this._container));var a=t.layerPointToContainerPoint(o),r=E(this.options.autoPanPadding),d=E(this.options.autoPanPaddingTopLeft||r),m=E(this.options.autoPanPaddingBottomRight||r),v=t.getSize(),P=0,B=0;a.x+n+m.x>v.x&&(P=a.x+n-v.x+m.x),a.x-P-d.x<0&&(P=a.x-d.x),a.y+i+m.y>v.y&&(B=a.y+i-v.y+m.y),a.y-B-d.y<0&&(B=a.y-d.y),(P||B)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([P,B]))}},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),La=function(t,e){return new hi(t,e)};W.mergeOptions({closePopupOnClick:!0}),W.include({openPopup:function(t,e,i){return this._initOverlay(hi,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),At.include({bindPopup:function(t,e){return this._popup=this._initOverlay(hi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Kt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){he(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof $t)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var li=Rt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Rt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Rt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Rt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=J("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,a=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),d=this.options.direction,m=o.offsetWidth,v=o.offsetHeight,P=E(this.options.offset),B=this._getAnchor();d==="top"?(e=m/2,i=v):d==="bottom"?(e=m/2,i=0):d==="center"?(e=m/2,i=v/2):d==="right"?(e=0,i=v/2):d==="left"?(e=m,i=v/2):r.x<a.x?(d="right",e=0,i=v/2):(d="left",e=m+(P.x+B.x)*2,i=v/2),t=t.subtract(E(e,i,!0)).add(P).add(B),lt(o,"leaflet-tooltip-right"),lt(o,"leaflet-tooltip-left"),lt(o,"leaflet-tooltip-top"),lt(o,"leaflet-tooltip-bottom"),H(o,"leaflet-tooltip-"+d),ct(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&It(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pa=function(t,e){return new li(t,e)};W.include({openTooltip:function(t,e,i){return this._initOverlay(li,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),At.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(li,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Kt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(R(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),R(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,n;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(e)}});var An=_e.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(qe(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var n=E(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ta(t){return new An(t)}_e.Default=Ze;var Re=At.extend({options:{tileSize:256,opacity:1,updateWhenIdle:I.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){k(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),rt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(fe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=tt(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof g?t:new g(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),n=0,o=e.length,a;n<o;n++)a=e[n].style.zIndex,e[n]!==this._container&&a&&(i=t(i,+a));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!I.ielt9){It(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(!(!o.current||!o.loaded)){var a=Math.min(1,(t-o.loaded)/200);It(o.el,a),a<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(A(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=J("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(rt(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||(n=this._levels[t]={},n.el=J("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),C(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)rt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),a=Math.floor(e/2),r=i-1,d=new g(+o,+a);d.z=+r;var m=this._tileCoordsToKey(d),v=this._tiles[m];return v&&v.active?(v.retain=!0,!0):(v&&v.loaded&&(v.retain=!0),r>n?this._retainParent(o,a,r,n):!1)},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var a=2*e;a<2*e+2;a++){var r=new g(o,a);r.z=i+1;var d=this._tileCoordsToKey(r),m=this._tiles[d];if(m&&m.active){m.retain=!0;continue}else m&&m.loaded&&(m.retain=!0);i+1<n&&this._retainChildren(o,a,i+1,n)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=Math.round(e);this.options.maxZoom!==void 0&&o>this.options.maxZoom||this.options.minZoom!==void 0&&o<this.options.minZoom?o=void 0:o=this._clampZoom(o);var a=this.options.updateWhenZooming&&o!==this._tileZoom;(!n||a)&&(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();I.any3d?ae(t.el,o,n):ct(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(n*2);return new ot(o.subtract(a),o.add(a))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),a=o.getCenter(),r=[],d=this.options.keepBuffer,m=new ot(o.getBottomLeft().subtract([d,-d]),o.getTopRight().add([d,-d]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var v in this._tiles){var P=this._tiles[v].coords;(P.z!==this._tileZoom||!m.contains(new g(P.x,P.y)))&&(this._tiles[v].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var B=o.min.y;B<=o.max.y;B++)for(var K=o.min.x;K<=o.max.x;K++){var wt=new g(K,B);if(wt.z=this._tileZoom,!!this._isValidTile(wt)){var pt=this._tiles[this._tileCoordsToKey(wt)];pt?pt.current=!0:r.push(wt)}}if(r.sort(function(Mt,we){return Mt.distanceTo(a)-we.distanceTo(a)}),r.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Et=document.createDocumentFragment();for(K=0;K<r.length;K++)this._addTile(r[K],Et);this._level.el.appendChild(Et)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return st(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),a=e.unproject(n,t.z),r=e.unproject(o,t.z);return[a,r]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new _t(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new g(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(rt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){H(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=C,t.onmousemove=C,I.ielt9&&this.options.opacity<1&&It(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),S(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&O(S(this._tileReady,this,t,null,o)),ct(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(It(i.el,0),A(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(H(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),I.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(S(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new g(this._wrapX?z(t.x,this._wrapX):t.x,this._wrapY?z(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new ot(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ma(t){return new Re(t)}var ye=Re.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=k(this,e),e.detectRetina&&I.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return R(i,"load",S(this._tileOnLoad,this,e,i)),R(i,"error",S(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:I.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return Te(this._url,u(e,this.options))},_tileOnLoad:function(t,e){I.ielt9?setTimeout(S(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=C,e.onerror=C,!e.complete)){e.src=ne;var i=this._tiles[t].coords;rt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",ne),Re.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===ne))return Re.prototype._tileReady.call(this,t,e,i)}});function zn(t,e){return new ye(t,e)}var On=ye.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=u({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=k(this,e);var o=e.detectRetina&&I.retina?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ye.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=vt(i.project(e[0]),i.project(e[1])),o=n.min,a=n.max,r=(this._wmsVersion>=1.3&&this._crs===Sn?[o.y,o.x,a.y,a.x]:[o.x,o.y,a.x,a.y]).join(","),d=ye.prototype.getTileUrl.call(this,t);return d+Pt(this.wmsParams,d,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function Sa(t,e){return new On(t,e)}ye.WMS=On,zn.wms=Sa;var Ut=At.extend({options:{padding:.1},initialize:function(t){k(this,t),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),H(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=n.multiplyBy(-i).add(o).subtract(this._map._getNewPixelOrigin(t,e));I.any3d?ae(this._container,a,i):ct(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new ot(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Nn=Ut.extend({options:{tolerance:0},getEvents:function(){var t=Ut.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ut.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");R(t,"mousemove",this._onMouseMove,this),R(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),R(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,rt(this._container),at(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ut.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=I.retina?2:1;ct(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",I.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ut.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[w(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[w(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],n,o;for(o=0;o<e.length;o++){if(n=Number(e[o]),isNaN(n))return;i.push(n)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ot,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,a,r=t._parts,d=r.length,m=this._ctx;if(d){for(m.beginPath(),i=0;i<d;i++){for(n=0,o=r[i].length;n<o;n++)a=r[i][n],m[n?"lineTo":"moveTo"](a.x,a.y);e&&m.closePath()}this._fillStroke(m,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;o!==1&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,Math.PI*2,!1),o!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,n,o=this._drawFirst;o;o=o.next)i=o.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(n=i);this._fireEvent(n?[n]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(lt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,o=this._drawFirst;o;o=o.next)i=o.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(H(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(S(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;if(i)i.prev=n;else return;n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;if(n)n.next=i;else return;i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Zn(t){return I.canvas?new Nn(t):null}var De=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ca={_initContainer:function(){this._container=J("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ut.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=De("shape");H(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=De("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;rt(e),t.removeInteractiveTarget(e),delete this._layers[w(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=De("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=Tt(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=De("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){fe(t._container)},_bringToBack:function(t){me(t._container)}},ui=I.vml?De:Ve,He=Ut.extend({_initContainer:function(){this._container=ui("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ui("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rt(this._container),at(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ut.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ct(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ui("path");t.options.className&&H(e,t.options.className),t.options.interactive&&H(e,"leaflet-interactive"),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){rt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[w(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Se(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||i,o="a"+i+","+n+" 0 1,0 ",a=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+i*2+",0 "+o+-i*2+",0 ";this._setPath(t,a)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){fe(t._path)},_bringToBack:function(t){me(t._path)}});I.vml&&He.include(Ca);function Rn(t){return I.svg||I.vml?new He(t):null}W.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Zn(t)||Rn(t)}});var Dn=ge.extend({initialize:function(t,e){ge.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=st(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ia(t,e){return new Dn(t,e)}He.create=ui,He.pointsToPath=Se,Wt.geometryToLayer=ni,Wt.coordsToLatLng=Di,Wt.coordsToLatLngs=oi,Wt.latLngToCoords=Hi,Wt.latLngsToCoords=ai,Wt.getFeature=ve,Wt.asFeature=si,W.mergeOptions({boxZoom:!0});var Hn=Zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){R(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ee(),bi(),this._startPoint=this._map.mouseEventToContainerPoint(t),R(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=J("div","leaflet-zoom-box",this._container),H(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new ot(this._point,this._startPoint),i=e.getSize();ct(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(rt(this._box),lt(this._container,"leaflet-crosshair")),Be(),Li(),at(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(S(this._resetState,this),0);var e=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});W.addInitHook("addHandler","boxZoom",Hn),W.mergeOptions({doubleClickZoom:!0});var Gn=Zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;e.options.doubleClickZoom==="center"?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});W.addInitHook("addHandler","doubleClickZoom",Gn),W.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kn=Zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}H(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){lt(this._map._container,"leaflet-grab"),lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=st(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,a=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(a+i)?o:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,d=o.multiplyBy(r/a),m=d.distanceTo([0,0]),v=Math.min(i.inertiaMaxSpeed,m),P=d.multiplyBy(v/m),B=v/(i.inertiaDeceleration*r),K=P.multiplyBy(-B/2).round();!K.x&&!K.y?e.fire("moveend"):(K=e._limitOffset(K,e.options.maxBounds),O(function(){e.panBy(K,{duration:B,easeLinearity:r,noMoveStart:!0,animate:!0})}))}}});W.addInitHook("addHandler","dragging",Kn),W.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fn=Zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),R(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),at(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,n,o;for(n=0,o=i.left.length;n<o;n++)e[i.left[n]]=[-1*t,0];for(n=0,o=i.right.length;n<o;n++)e[i.right[n]]=[t,0];for(n=0,o=i.down.length;n<o;n++)e[i.down[n]]=[0,t];for(n=0,o=i.up.length;n<o;n++)e[i.up[n]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,n,o;for(n=0,o=i.zoomIn.length;n<o;n++)e[i.zoomIn[n]]=t;for(n=0,o=i.zoomOut.length;n<o;n++)e[i.zoomOut[n]]=-t},_addHooks:function(){R(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){at(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,n;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(n=this._panKeys[e],t.shiftKey&&(n=E(n).multiplyBy(3)),i.options.maxBounds&&(n=i._limitOffset(E(n),i.options.maxBounds)),i.options.worldCopyJump){var o=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(n)));i.panTo(o)}else i.panBy(n)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;he(t)}}});W.addInitHook("addHandler","keyboard",Fn),W.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wn=Zt.extend({addHooks:function(){R(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=mn(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(S(this._performZoom,this),n),he(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,a=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?a:-a))-e;this._delta=0,this._startTime=null,r&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});W.addInitHook("addHandler","scrollWheelZoom",Wn);var ka=600;W.mergeOptions({tapHold:I.touchNative&&I.safari&&I.mobile,tapTolerance:15});var Un=Zt.extend({addHooks:function(){R(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new g(e.clientX,e.clientY),this._holdTimeout=setTimeout(S(function(){this._cancel(),this._isTapValid()&&(R(document,"touchend",gt),R(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ka),R(document,"touchend touchcancel contextmenu",this._cancel,this),R(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){at(document,"touchend",gt),at(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new g(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});W.addInitHook("addHandler","tapHold",Un),W.mergeOptions({touchZoom:I.touch,bounceAtZoomLimits:!0});var jn=Zt.extend({addHooks:function(){H(this._map._container,"leaflet-touch-zoom"),R(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),R(document,"touchmove",this._onTouchMove,this),R(document,"touchend touchcancel",this._onTouchEnd,this),gt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,o===1)return}else{var a=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(o===1&&a.x===0&&a.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var r=S(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(r,this,!0),gt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});W.addInitHook("addHandler","touchZoom",jn),W.BoxZoom=Hn,W.DoubleClickZoom=Gn,W.Drag=Kn,W.Keyboard=Fn,W.ScrollWheelZoom=Wn,W.TapHold=Un,W.TouchZoom=jn,s.Bounds=ot,s.Browser=I,s.CRS=St,s.Canvas=Nn,s.Circle=Ri,s.CircleMarker=ii,s.Class=Q,s.Control=Bt,s.DivIcon=An,s.DivOverlay=Rt,s.DomEvent=Yo,s.DomUtil=jo,s.Draggable=Qt,s.Evented=G,s.FeatureGroup=Kt,s.GeoJSON=Wt,s.GridLayer=Re,s.Handler=Zt,s.Icon=_e,s.ImageOverlay=ri,s.LatLng=q,s.LatLngBounds=_t,s.Layer=At,s.LayerGroup=pe,s.LineUtil=ra,s.Map=W,s.Marker=ei,s.Mixin=ea,s.Path=$t,s.Point=g,s.PolyUtil=ia,s.Polygon=ge,s.Polyline=Ft,s.Popup=hi,s.PosAnimation=pn,s.Projection=ha,s.Rectangle=Dn,s.Renderer=Ut,s.SVG=He,s.SVGOverlay=Bn,s.TileLayer=ye,s.Tooltip=li,s.Transformation=Ue,s.Util=et,s.VideoOverlay=En,s.bind=S,s.bounds=vt,s.canvas=Zn,s.circle=_a,s.circleMarker=pa,s.control=Oe,s.divIcon=Ta,s.extend=u,s.featureGroup=da,s.geoJSON=kn,s.geoJson=ya,s.gridLayer=Ma,s.icon=fa,s.imageOverlay=wa,s.latLng=D,s.latLngBounds=st,s.layerGroup=ca,s.map=qo,s.marker=ma,s.point=E,s.polygon=va,s.polyline=ga,s.popup=La,s.rectangle=Ia,s.setOptions=k,s.stamp=w,s.svg=Rn,s.svgOverlay=ba,s.tileLayer=zn,s.tooltip=Pa,s.transformation=Jt,s.version=c,s.videoOverlay=xa;var Ea=window.L;s.noConflict=function(){return window.L=Ea,this},window.L=s}))})(Ge,Ge.exports)),Ge.exports}var es=ts();const Le=Qa(es);let zt=null,Fi=null,di=null,be=null;const so="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",ro="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",is='&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> &copy; <a href="https://carto.com/">CARTO</a>';function ho(){return document.documentElement.dataset.theme==="dark"}function lo(l){return l.cityLat!=null&&l.cityLng!=null?[l.cityLat,l.cityLng]:l.country&&Ke[l.country]?Ke[l.country]:null}function ns(){zt=Le.map("leafletMap",{center:[20,0],zoom:2,minZoom:2,maxZoom:10,zoomControl:!1,worldCopyJump:!0,attributionControl:!0}),Fi=Le.tileLayer(ho()?so:ro,{attribution:is,subdomains:"abcd",maxZoom:19}).addTo(zt),di=Le.layerGroup().addTo(zt),_("mpList").addEventListener("click",l=>{const h=l.target.closest(".cc-tag");if(h&&h.dataset.focus){l.stopPropagation(),document.dispatchEvent(new CustomEvent("focusMember",{detail:parseInt(h.dataset.focus)}));return}const s=l.target.closest(".mp-item");s&&s.dataset.country&&uo(s.dataset.country)})}function os(){if(!zt||!di)return;di.clearLayers();const l={};f.members.forEach(h=>{if(!h.country||!Ke[h.country])return;const s=h.city&&h.cityLat!=null?h.country+":"+h.city:h.country;l[s]||(l[s]=[]),l[s].push(h)}),Object.entries(l).forEach(([h,s])=>{const c=h.split(":")[0],u=h.includes(":")?h.split(":").slice(1).join(":"):null,b=ie[c];if(!b)return;const S=lo(s[0]);if(!S)return;const N=s.length===1;let w;u?w=N?s[0].firstName+(s[0].lastName?" "+s[0].lastName[0]+".":""):u+" "+s.length:w=N?s[0].firstName+(s[0].lastName?" "+s[0].lastName[0]+".":""):b.flag+" "+s.length;const z='<div class="pin-wrap"><div class="pin-pulse"></div>'+(N?'<div class="pin-dot"></div>':'<div class="pin-dot multi">'+s.length+"</div>")+'<div class="pin-label">'+bt(w)+"</div></div>",C=Le.divIcon({className:"pin-icon",html:z,iconSize:[40,36],iconAnchor:[20,14]}),ht='<div style="text-align:center;padding:2px 0">'+(u?'<span style="font-size:22px;vertical-align:middle">'+b.flag+'</span> <b style="font-size:12px">'+bt(u)+'</b><div style="font-size:9px;color:var(--t3)">'+bt(b.name)+"</div>":'<span style="font-size:22px;vertical-align:middle">'+b.flag+'</span> <b style="font-size:12px">'+bt(b.name)+"</b>")+'<div style="margin-top:4px;font-size:10px;color:var(--t2)">'+s.map(k=>bt(k.firstName)+(k.city&&!u?' <span style="color:var(--t3)">('+bt(k.city)+")</span>":"")).join(", ")+"</div></div>",V=Le.marker([S[0],S[1]],{icon:C}).bindPopup(ht,{closeButton:!1,offset:[0,-4]}).on("click",()=>{uo(c)});di.addLayer(V)})}function uo(l){if(be=be===l?null:l,co(),be&&Ke[be]&&zt){const h=Ke[be];zt.flyTo([h[0],h[1]],5,{duration:.8})}}function co(){const l={},h=[];f.members.forEach(u=>{u.country&&ie[u.country]?(l[u.country]||(l[u.country]=[]),l[u.country].push(u)):h.push(u)});const s=Object.entries(l).sort((u,b)=>b[1].length-u[1].length);_("mpCount").textContent=s.length+" countries";let c="";s.forEach(([u,b])=>{const S=ie[u],N=be===u;if(c+='<div class="mp-item'+(N?" active":"")+'" data-country="'+u+'">',c+='<div class="mp-flag">'+S.flag+'</div><div class="mp-info"><div class="mp-name">'+bt(S.name)+"</div>",c+='<div class="mp-sub">'+b.map(w=>w.firstName+(w.city?" ("+w.city+")":"")).join(", ")+"</div></div>",c+='<div class="mp-num">'+b.length+"</div></div>",N){const w={},tt=[];b.forEach(z=>{z.city?(w[z.city]||(w[z.city]=[]),w[z.city].push(z)):tt.push(z)}),c+='<div class="mp-members">',Object.entries(w).sort((z,C)=>z[0].localeCompare(C[0])).forEach(([z,C])=>{c+='<div style="font-size:9px;color:var(--t3);margin:4px 2px 2px;font-weight:600">'+bt(z)+"</div>",C.forEach(nt=>{c+='<span class="cc-tag" data-focus="'+nt.id+'">'+bt(nt.firstName+(nt.lastName?" "+nt.lastName[0]+".":""))+"</span>"})}),tt.length&&(Object.keys(w).length&&(c+='<div style="font-size:9px;color:var(--t3);margin:4px 2px 2px;font-weight:600">No city set</div>'),tt.forEach(z=>{c+='<span class="cc-tag" data-focus="'+z.id+'">'+bt(z.firstName+(z.lastName?" "+z.lastName[0]+".":""))+"</span>"})),c+="</div>"}}),_("mpList").innerHTML=c||'<div style="padding:20px;text-align:center;font-size:11px;color:var(--t3)">No countries assigned yet</div>',h.length?(_("mpUnset").style.display="block",_("mpUnset").innerHTML="<b>"+h.length+"</b> without country"):_("mpUnset").style.display="none",_("mapDesc").textContent=s.length+" countries Â· "+f.members.filter(u=>u.country).length+" members located"}function as(){if(!zt)return;zt.invalidateSize();const l=[];f.members.forEach(h=>{const s=lo(h);s&&l.push(s)}),l.length>0?zt.fitBounds(Le.latLngBounds(l).pad(.3),{maxZoom:6,animate:!0}):zt.setView([20,0],2)}function ss(){!Fi||!zt||Fi.setUrl(ho()?so:ro)}const fo={AF:[["Herat",34.34,62.2],["Jalalabad",34.43,70.45],["Kabul",34.53,69.17],["Kandahar",31.63,65.71],["Mazar-i-Sharif",36.71,67.11]],AL:[["Durres",41.32,19.45],["Elbasan",41.11,20.08],["Fier",40.72,19.56],["Korce",40.62,20.78],["Shkoder",42.07,19.51],["Tirana",41.33,19.82],["Vlore",40.47,19.49]],DZ:[["Algiers",36.75,3.04],["Annaba",36.9,7.77],["Batna",35.56,6.17],["Bejaia",36.75,5.08],["Biskra",34.85,5.73],["Blida",36.47,2.83],["Constantine",36.37,6.61],["Oran",35.7,-.63],["Setif",36.19,5.41],["Tlemcen",34.88,-1.31]],AO:[["Benguela",-12.58,13.4],["Cabinda",-5.55,12.2],["Huambo",-12.78,15.74],["Lobito",-12.35,13.55],["Luanda",-8.84,13.23],["Lubango",-14.92,13.49],["Malanje",-9.54,16.34],["Namibe",-15.2,12.15]],AR:[["Bahia Blanca",-38.72,-62.27],["Buenos Aires",-34.6,-58.38],["Cordoba",-31.42,-64.18],["Corrientes",-27.47,-58.83],["La Plata",-34.92,-57.95],["Mar del Plata",-38,-57.56],["Mendoza",-32.89,-68.83],["Neuquen",-38.95,-68.06],["Posadas",-27.37,-55.9],["Resistencia",-27.45,-59],["Rosario",-32.95,-60.65],["Salta",-24.79,-65.41],["San Juan",-31.54,-68.54],["San Miguel de Tucuman",-26.81,-65.22],["Santa Fe",-31.63,-60.7]],AM:[["Gyumri",40.79,43.85],["Kapan",39.21,46.41],["Vanadzor",40.81,44.49],["Yerevan",40.18,44.51]],AU:[["Adelaide",-34.93,138.6],["Brisbane",-27.47,153.03],["Cairns",-16.92,145.77],["Canberra",-35.28,149.13],["Darwin",-12.46,130.84],["Geelong",-38.15,144.36],["Gold Coast",-28,153.43],["Hobart",-42.88,147.33],["Melbourne",-37.81,144.96],["Newcastle",-32.93,151.78],["Perth",-31.95,115.86],["Sunshine Coast",-26.65,153.07],["Sydney",-33.87,151.21],["Townsville",-19.26,146.82],["Wollongong",-34.42,150.89]],AT:[["Graz",47.07,15.44],["Innsbruck",47.26,11.39],["Klagenfurt",46.62,14.31],["Linz",48.31,14.29],["Salzburg",47.8,13.04],["Vienna",48.21,16.37],["Villach",46.61,13.85],["Wels",48.16,14.03]],AZ:[["Baku",40.41,49.87],["Ganja",40.68,46.36],["Lankaran",38.75,48.85],["Mingachevir",40.77,47.06],["Nakhchivan",39.21,45.41],["Shirvan",39.93,48.92],["Sumqayit",40.59,49.63]],BH:[["Hamad Town",26.12,50.5],["Manama",26.23,50.59],["Muharraq",26.26,50.61],["Riffa",26.13,50.56]],BD:[["Barisal",22.7,90.37],["Bogra",24.85,89.37],["Chittagong",22.36,91.78],["Comilla",23.46,91.18],["Cox's Bazar",21.44,92.01],["Dhaka",23.81,90.41],["Jessore",23.17,89.21],["Khulna",22.82,89.55],["Mymensingh",24.75,90.41],["Narayanganj",23.63,90.5],["Rajshahi",24.37,88.6],["Rangpur",25.74,89.25],["Sylhet",24.9,91.87],["Tongi",23.88,90.4]],BY:[["Brest",52.1,23.7],["Gomel",52.44,30.99],["Grodno",53.68,23.83],["Minsk",53.9,27.57],["Mogilev",53.91,30.34],["Vitebsk",55.19,30.21]],BE:[["Antwerp",51.22,4.4],["Bruges",51.21,3.22],["Brussels",50.85,4.35],["Charleroi",50.41,4.44],["Ghent",51.05,3.72],["Leuven",50.88,4.7],["Liege",50.63,5.57],["Namur",50.47,4.87]],BJ:[["Abomey-Calavi",6.45,2.36],["Cotonou",6.37,2.39],["Djougou",9.71,1.67],["Parakou",9.34,2.63],["Porto-Novo",6.5,2.6]],BO:[["Cochabamba",-17.39,-66.16],["El Alto",-16.5,-68.16],["La Paz",-16.5,-68.15],["Oruro",-17.96,-67.11],["Potosi",-19.59,-65.75],["Santa Cruz",-17.78,-63.18],["Sucre",-19.04,-65.26],["Tarija",-21.53,-64.73]],BA:[["Banja Luka",44.77,17.19],["Mostar",43.34,17.81],["Sarajevo",43.86,18.41],["Tuzla",44.54,18.67],["Zenica",44.2,17.91]],BW:[["Francistown",-21.17,27.51],["Gaborone",-24.65,25.91],["Maun",-19.98,23.42],["Molepolole",-24.41,25.5],["Selebi-Phikwe",-21.98,27.84]],BR:[["Belem",-1.46,-48.5],["Belo Horizonte",-19.92,-43.94],["Brasilia",-15.79,-47.88],["Campinas",-22.91,-47.06],["Curitiba",-25.43,-49.27],["Florianopolis",-27.6,-48.55],["Fortaleza",-3.72,-38.53],["Goiania",-16.69,-49.25],["Guarulhos",-23.46,-46.53],["Manaus",-3.12,-60.02],["Natal",-5.79,-35.21],["Porto Alegre",-30.03,-51.23],["Recife",-8.05,-34.87],["Rio de Janeiro",-22.91,-43.17],["Salvador",-12.97,-38.51],["Santos",-23.96,-46.33],["Sao Luis",-2.53,-44.28],["Sao Paulo",-23.55,-46.63],["Vitoria",-20.32,-40.34]],BG:[["Burgas",42.5,27.47],["Plovdiv",42.15,24.75],["Ruse",43.85,25.97],["Sofia",42.7,23.32],["Stara Zagora",42.43,25.63],["Varna",43.21,27.91]],BF:[["Banfora",10.63,-4.76],["Bobo-Dioulasso",11.18,-4.3],["Koudougou",12.25,-2.36],["Ouagadougou",12.37,-1.52],["Ouahigouya",13.58,-2.42]],BI:[["Bujumbura",-3.38,29.36],["Gitega",-3.43,29.93],["Muyinga",-2.85,30.34],["Ngozi",-2.91,29.83],["Rumonge",-3.97,29.44]],KH:[["Battambang",13.1,103.2],["Kampong Cham",11.99,105.46],["Phnom Penh",11.56,104.93],["Siem Reap",13.36,103.86],["Sihanoukville",10.63,103.52]],CM:[["Bamenda",5.95,10.15],["Bafoussam",5.48,10.42],["Douala",4.05,9.7],["Garoua",9.3,13.4],["Maroua",10.59,14.32],["Ngaoundere",7.32,13.58],["Yaounde",3.87,11.52]],CA:[["Calgary",51.05,-114.07],["Edmonton",53.55,-113.49],["Halifax",44.65,-63.57],["Hamilton",43.26,-79.87],["Kitchener",43.45,-80.48],["London",42.98,-81.25],["Mississauga",43.59,-79.64],["Montreal",45.5,-73.57],["Ottawa",45.42,-75.7],["Quebec City",46.81,-71.21],["Regina",50.45,-104.62],["Saskatoon",52.13,-106.67],["Surrey",49.19,-122.85],["Toronto",43.65,-79.38],["Vancouver",49.28,-123.12],["Victoria",48.43,-123.37],["Whitehorse",60.72,-135.06],["Windsor",42.3,-83.02],["Winnipeg",49.9,-97.14],["Yellowknife",62.45,-114.37]],CF:[["Bangui",4.36,18.56],["Berberati",4.26,15.79],["Bimbo",4.23,18.51],["Carnot",4.94,15.87]],TD:[["Abeche",13.83,20.83],["Moundou",8.57,16.07],["N'Djamena",12.11,15.04],["Sarh",9.14,18.39]],CL:[["Antofagasta",-23.65,-70.4],["Arica",-18.48,-70.33],["Concepcion",-36.83,-73.05],["Copiapo",-27.37,-70.33],["Iquique",-20.21,-70.15],["La Serena",-29.91,-71.25],["Puerto Montt",-41.47,-72.94],["Punta Arenas",-53.15,-70.92],["Rancagua",-34.17,-70.74],["Santiago",-33.45,-70.67],["Temuco",-38.74,-72.6],["Valparaiso",-33.05,-71.62]],CN:[["Beijing",39.9,116.4],["Changchun",43.88,125.32],["Changsha",28.23,112.94],["Chengdu",30.57,104.07],["Chongqing",29.56,106.55],["Dalian",38.91,121.6],["Dongguan",23.02,113.75],["Fuzhou",26.07,119.3],["Guangzhou",23.13,113.26],["Guiyang",26.65,106.63],["Hangzhou",30.27,120.15],["Harbin",45.75,126.65],["Hefei",31.82,117.23],["Jinan",36.65,116.98],["Kunming",25.04,102.68],["Lanzhou",36.06,103.83],["Lhasa",29.65,91.1],["Nanjing",32.06,118.8],["Nanning",22.82,108.32],["Qingdao",36.07,120.38],["Shanghai",31.23,121.47],["Shenyang",41.8,123.43],["Shenzhen",22.54,114.06],["Suzhou",31.3,120.59],["Tianjin",39.08,117.2],["Urumqi",43.83,87.62],["Wuhan",30.59,114.31],["Xi'an",34.26,108.94],["Xiamen",24.48,118.09],["Zhengzhou",34.75,113.65]],CO:[["Barranquilla",10.96,-74.78],["Bogota",4.71,-74.07],["Bucaramanga",7.13,-73.13],["Cali",3.44,-76.52],["Cartagena",10.39,-75.51],["Cucuta",7.89,-72.5],["Ibague",4.44,-75.24],["Manizales",5.07,-75.52],["Medellin",6.25,-75.56],["Pereira",4.81,-75.69],["Santa Marta",11.24,-74.2],["Villavicencio",4.14,-73.63]],CD:[["Bukavu",-2.51,28.86],["Goma",-1.68,29.23],["Kananga",-5.9,22.42],["Kinshasa",-4.32,15.31],["Kisangani",.52,25.19],["Kolwezi",-10.72,25.47],["Lubumbashi",-11.66,27.48],["Matadi",-5.83,13.44],["Mbuji-Mayi",-6.15,23.59]],CG:[["Brazzaville",-4.27,15.28],["Dolisie",-4.2,12.67],["Nkayi",-4.17,13.29],["Pointe-Noire",-4.77,11.87]],CR:[["Alajuela",10.02,-84.21],["Cartago",9.86,-83.92],["Heredia",10,-84.12],["Liberia",10.63,-85.44],["Limon",10,-83.03],["San Jose",9.93,-84.08]],HR:[["Dubrovnik",42.65,18.09],["Osijek",45.55,18.69],["Rijeka",45.33,14.44],["Split",43.51,16.44],["Zadar",44.12,15.23],["Zagreb",45.81,15.98]],CU:[["Camaguey",21.38,-77.92],["Cienfuegos",22.15,-80.44],["Guantanamo",20.14,-75.21],["Havana",23.11,-82.37],["Holguin",20.79,-76.26],["Santa Clara",22.41,-79.95],["Santiago de Cuba",20.02,-75.83]],CY:[["Famagusta",35.13,33.94],["Larnaca",34.92,33.63],["Limassol",34.68,33.04],["Nicosia",35.18,33.38],["Paphos",34.78,32.42]],CZ:[["Brno",49.2,16.61],["Liberec",50.77,15.06],["Olomouc",49.59,17.25],["Ostrava",49.84,18.29],["Pardubice",50.04,15.78],["Plzen",49.75,13.38],["Prague",50.08,14.44],["Usti nad Labem",50.66,14.04]],DK:[["Aalborg",57.05,9.92],["Aarhus",56.15,10.21],["Copenhagen",55.68,12.57],["Esbjerg",55.47,8.46],["Odense",55.4,10.39],["Randers",56.46,10.04],["Roskilde",55.64,12.09]],DJ:[["Ali Sabieh",11.16,42.71],["Djibouti",11.59,43.15],["Tadjoura",11.78,42.88]],DO:[["La Romana",18.43,-68.97],["La Vega",19.22,-70.53],["Puerto Plata",19.8,-70.69],["San Cristobal",18.42,-70.11],["San Pedro de Macoris",18.46,-69.31],["Santiago de los Caballeros",19.45,-70.7],["Santo Domingo",18.49,-69.93]],EC:[["Ambato",-1.24,-78.63],["Cuenca",-2.9,-79],["Esmeraldas",.97,-79.65],["Guayaquil",-2.19,-79.89],["Loja",-3.99,-79.2],["Machala",-3.26,-79.96],["Manta",-.95,-80.73],["Portoviejo",-1.05,-80.45],["Quito",-.18,-78.47],["Riobamba",-1.66,-78.65]],EG:[["Alexandria",31.2,29.92],["Aswan",24.09,32.9],["Asyut",27.18,31.18],["Cairo",30.04,31.24],["Faiyum",29.31,30.84],["Giza",30.01,31.21],["Hurghada",27.26,33.81],["Ismailia",30.6,32.27],["Luxor",25.69,32.64],["Mansoura",31.04,31.38],["Port Said",31.26,32.3],["Sharm el-Sheikh",27.91,34.33],["Suez",29.97,32.54],["Tanta",30.79,31],["Zagazig",30.59,31.5]],SV:[["Mejicanos",13.74,-89.21],["San Miguel",13.48,-88.18],["San Salvador",13.69,-89.22],["Santa Ana",13.99,-89.56],["Soyapango",13.71,-89.15]],GQ:[["Bata",1.86,9.77],["Ebebiyin",2.15,11.33],["Malabo",3.75,8.78]],ER:[["Asmara",15.34,38.93],["Assab",13.01,42.74],["Keren",15.78,38.45],["Massawa",15.61,39.47]],EE:[["Narva",59.38,28.19],["Parnu",58.39,24.5],["Tallinn",59.44,24.75],["Tartu",58.38,26.72]],SZ:[["Lobamba",-26.47,31.2],["Manzini",-26.5,31.38],["Mbabane",-26.32,31.13],["Nhlangano",-27.12,31.2]],ET:[["Addis Ababa",9.02,38.75],["Adama",8.54,39.27],["Bahir Dar",11.6,37.39],["Dessie",11.13,39.64],["Dire Dawa",9.6,41.85],["Gondar",12.6,37.47],["Hawassa",7.06,38.48],["Jimma",7.67,36.84],["Mekelle",13.5,39.47]],FI:[["Espoo",60.21,24.66],["Helsinki",60.17,24.94],["Jyvaskyla",62.24,25.75],["Kuopio",62.89,27.68],["Lahti",60.98,25.66],["Oulu",65.01,25.47],["Rovaniemi",66.5,25.73],["Tampere",61.5,23.76],["Turku",60.45,22.27],["Vantaa",60.29,25.04]],FR:[["Bordeaux",44.84,-.58],["Brest",48.39,-4.49],["Clermont-Ferrand",45.78,3.08],["Dijon",47.32,5.04],["Grenoble",45.19,5.72],["Le Havre",49.49,.11],["Lille",50.63,3.06],["Lyon",45.76,4.84],["Marseille",43.3,5.37],["Montpellier",43.61,3.88],["Nantes",47.22,-1.55],["Nice",43.71,7.26],["Paris",48.86,2.35],["Reims",49.25,4.03],["Rennes",48.11,-1.68],["Rouen",49.44,1.1],["Saint-Etienne",45.43,4.39],["Strasbourg",48.57,7.75],["Toulon",43.12,5.93],["Toulouse",43.6,1.44]],GA:[["Franceville",-1.63,13.59],["Libreville",.39,9.45],["Oyem",1.6,11.58],["Port-Gentil",-.72,8.78]],GM:[["Banjul",13.45,-16.58],["Brikama",13.27,-16.65],["Serekunda",13.44,-16.68]],GE:[["Batumi",41.64,41.64],["Kutaisi",42.27,42.69],["Rustavi",41.55,44.99],["Tbilisi",41.72,44.78],["Zugdidi",42.51,41.87]],DE:[["Berlin",52.52,13.41],["Bielefeld",52.03,8.53],["Bonn",50.74,7.1],["Bremen",53.08,8.8],["Cologne",50.94,6.96],["Dortmund",51.51,7.47],["Dresden",51.05,13.74],["Dusseldorf",51.23,6.78],["Essen",51.46,7.01],["Frankfurt",50.11,8.68],["Hamburg",53.55,9.99],["Hannover",52.38,9.73],["Karlsruhe",49.01,8.4],["Leipzig",51.34,12.37],["Mannheim",49.49,8.47],["Munich",48.14,11.58],["Nuremberg",49.45,11.08],["Stuttgart",48.78,9.18]],GH:[["Accra",5.56,-.19],["Cape Coast",5.11,-1.25],["Kumasi",6.69,-1.62],["Sekondi-Takoradi",4.93,-1.76],["Sunyani",7.34,-2.33],["Tamale",9.4,-.84],["Tema",5.67,-.02]],GR:[["Athens",37.98,23.73],["Heraklion",35.34,25.13],["Ioannina",39.66,20.85],["Kavala",40.94,24.4],["Larissa",39.64,22.42],["Patras",38.25,21.73],["Piraeus",37.94,23.65],["Rhodes",36.43,28.22],["Thessaloniki",40.64,22.94],["Volos",39.36,22.95]],GT:[["Escuintla",14.3,-90.79],["Guatemala City",14.63,-90.51],["Mixco",14.63,-90.61],["Petapa",14.5,-90.55],["Quetzaltenango",14.83,-91.52],["Villa Nueva",14.53,-90.59]],GN:[["Conakry",9.54,-13.68],["Kankan",10.39,-9.31],["Kindia",10.06,-12.86],["Labe",11.32,-12.29],["Nzerekore",7.76,-8.82]],GW:[["Bafata",12.17,-14.66],["Bissau",11.86,-15.6],["Gabu",12.28,-14.22]],GY:[["Georgetown",6.8,-58.16],["Linden",6,-58.3],["New Amsterdam",6.25,-57.52]],HT:[["Cap-Haitien",19.76,-72.2],["Carrefour",18.54,-72.4],["Delmas",18.55,-72.3],["Les Cayes",18.2,-73.76],["Port-au-Prince",18.54,-72.34]],HN:[["Choloma",15.61,-87.95],["Comayaguela",14.08,-87.22],["La Ceiba",15.76,-86.79],["San Pedro Sula",15.5,-88.03],["Tegucigalpa",14.07,-87.19]],HU:[["Budapest",47.5,19.04],["Debrecen",47.53,21.63],["Gyor",47.68,17.63],["Kecskemet",46.91,19.69],["Miskolc",48.1,20.78],["Nyiregyhaza",47.96,21.72],["Pecs",46.07,18.23],["Szeged",46.25,20.15],["Szekesfehervar",47.19,18.41]],IS:[["Akureyri",65.68,-18.09],["Hafnarfjordur",64.07,-21.97],["Kopavogur",64.11,-21.91],["Reykjavik",64.15,-21.94]],IN:[["Ahmedabad",23.02,72.57],["Bangalore",12.97,77.59],["Bhopal",23.26,77.41],["Chandigarh",30.73,76.77],["Chennai",13.08,80.27],["Coimbatore",11.01,76.96],["Delhi",28.7,77.1],["Guwahati",26.14,91.74],["Hyderabad",17.39,78.49],["Indore",22.72,75.86],["Jaipur",26.91,75.79],["Kanpur",26.45,80.35],["Kochi",9.93,76.27],["Kolkata",22.57,88.36],["Lucknow",26.85,80.95],["Mumbai",19.08,72.88],["Nagpur",21.15,79.09],["Patna",25.61,85.14],["Pune",18.52,73.86],["Surat",21.17,72.83],["Thiruvananthapuram",8.52,76.94],["Varanasi",25.32,82.99],["Visakhapatnam",17.69,83.22]],ID:[["Balikpapan",-1.27,116.83],["Bandung",-6.91,107.61],["Banjarmasin",-3.32,114.59],["Batam",1.05,104.03],["Bekasi",-6.24,107],["Denpasar",-8.65,115.22],["Depok",-6.4,106.82],["Jakarta",-6.21,106.85],["Makassar",-5.14,119.42],["Malang",-7.98,112.63],["Manado",1.49,124.84],["Medan",3.59,98.67],["Padang",-.95,100.35],["Palembang",-2.99,104.76],["Pekanbaru",.51,101.45],["Semarang",-6.97,110.42],["Surabaya",-7.25,112.75],["Tangerang",-6.18,106.63],["Yogyakarta",-7.8,110.36]],IR:[["Ahvaz",31.32,48.69],["Bandar Abbas",27.19,56.27],["Esfahan",32.65,51.68],["Hamadan",34.8,48.51],["Karaj",35.84,50.97],["Kerman",30.28,57.08],["Kermanshah",34.31,47.07],["Mashhad",36.3,59.6],["Qom",34.64,50.88],["Rasht",37.28,49.59],["Shiraz",29.59,52.58],["Tabriz",38.08,46.29],["Tehran",35.69,51.39],["Yazd",31.9,54.37]],IQ:[["Baghdad",33.31,44.37],["Basra",30.51,47.81],["Erbil",36.19,44.01],["Hillah",32.48,44.42],["Karbala",32.62,44.02],["Kirkuk",35.47,44.39],["Mosul",36.34,43.12],["Najaf",32,44.34],["Nasiriyah",31.05,46.26],["Sulaymaniyah",35.56,45.44]],IE:[["Cork",51.9,-8.47],["Dublin",53.35,-6.26],["Galway",53.27,-9.06],["Kilkenny",52.65,-7.25],["Limerick",52.66,-8.63],["Waterford",52.26,-7.11]],IL:[["Beersheba",31.25,34.79],["Eilat",29.56,34.95],["Haifa",32.79,34.99],["Jerusalem",31.77,35.22],["Nazareth",32.7,35.3],["Netanya",32.33,34.86],["Rishon LeZion",31.96,34.8],["Tel Aviv",32.09,34.78]],IT:[["Bari",41.12,16.87],["Bologna",44.49,11.34],["Cagliari",39.22,9.12],["Catania",37.5,15.09],["Florence",43.77,11.25],["Genoa",44.41,8.93],["Milan",45.46,9.19],["Naples",40.85,14.27],["Padua",45.41,11.88],["Palermo",38.12,13.36],["Perugia",43.11,12.39],["Rome",41.9,12.5],["Taranto",40.47,17.24],["Trieste",45.65,13.78],["Turin",45.07,7.69],["Venice",45.44,12.32],["Verona",45.44,10.99]],JM:[["Kingston",18,-76.79],["Mandeville",18.04,-77.5],["Montego Bay",18.47,-77.92],["Portmore",17.95,-76.88],["Spanish Town",17.99,-76.96]],JP:[["Chiba",35.61,140.12],["Fukuoka",33.59,130.4],["Hamamatsu",34.71,137.73],["Hiroshima",34.4,132.46],["Kawasaki",35.53,139.7],["Kobe",34.69,135.2],["Kumamoto",32.8,130.71],["Kyoto",35.01,135.77],["Nagasaki",32.75,129.88],["Nagoya",35.18,136.91],["Niigata",37.9,139.02],["Okayama",34.66,133.92],["Osaka",34.69,135.5],["Saitama",35.86,139.65],["Sapporo",43.06,141.35],["Sendai",38.27,140.87],["Shizuoka",34.98,138.38],["Tokyo",35.68,139.69],["Yokohama",35.44,139.64]],JO:[["Amman",31.95,35.93],["Aqaba",29.53,35.01],["Irbid",32.55,35.85],["Madaba",31.72,35.79],["Zarqa",32.07,36.09]],KZ:[["Aktau",43.65,51.15],["Aktobe",50.28,57.17],["Almaty",43.24,76.95],["Astana",51.17,71.43],["Atyrau",47.1,51.92],["Karaganda",49.8,73.1],["Kostanay",53.21,63.63],["Pavlodar",52.29,76.95],["Semey",50.41,80.23],["Shymkent",42.32,69.6],["Taraz",42.9,71.37],["Uralsk",51.23,51.37]],KE:[["Eldoret",.52,35.27],["Garissa",-.45,39.66],["Kisumu",-.09,34.77],["Malindi",-3.22,40.12],["Mombasa",-4.05,39.67],["Nairobi",-1.29,36.82],["Nakuru",-.3,36.07],["Nyeri",-.42,36.95],["Thika",-1.03,37.07]],KW:[["Al Ahmadi",29.08,48.08],["Hawalli",29.33,48.03],["Kuwait City",29.38,47.99],["Salmiya",29.33,48.08]],KG:[["Bishkek",42.87,74.59],["Jalal-Abad",40.93,73],["Karakol",42.49,78.39],["Osh",40.53,72.8]],LA:[["Luang Prabang",19.89,102.13],["Pakse",15.12,105.8],["Savannakhet",16.55,104.75],["Vientiane",17.97,102.63]],LV:[["Daugavpils",55.87,26.54],["Jelgava",56.65,23.71],["Jurmala",56.97,23.77],["Liepaja",56.51,21.01],["Riga",56.95,24.11]],LB:[["Beirut",33.89,35.5],["Jounieh",33.98,35.62],["Sidon",33.56,35.37],["Tripoli",34.44,35.83],["Tyre",33.27,35.2],["Zahle",33.85,35.9]],LS:[["Leribe",-28.87,28.05],["Mafeteng",-29.82,27.24],["Maseru",-29.32,27.48],["Teyateyaneng",-29.15,27.75]],LR:[["Buchanan",5.88,-10.05],["Gbarnga",7,-9.47],["Harper",4.38,-7.72],["Monrovia",6.3,-10.8]],LY:[["Benghazi",32.12,20.07],["Misrata",32.38,15.09],["Sabha",27.04,14.43],["Tripoli",32.9,13.18],["Zliten",32.47,14.57]],LT:[["Kaunas",54.9,23.9],["Klaipeda",55.71,21.14],["Panevezys",55.73,24.36],["Siauliai",55.93,23.31],["Vilnius",54.69,25.28]],LU:[["Differdange",49.52,5.89],["Dudelange",49.48,6.09],["Esch-sur-Alzette",49.5,5.98],["Luxembourg City",49.61,6.13]],MG:[["Antsirabe",-19.87,47.03],["Antsiranana",-12.28,49.29],["Fianarantsoa",-21.44,47.09],["Mahajanga",-15.72,46.32],["Antananarivo",-18.91,47.52],["Toamasina",-18.14,49.4],["Toliara",-23.35,43.68]],MW:[["Blantyre",-15.79,35.01],["Lilongwe",-13.97,33.79],["Mzuzu",-11.46,34.02],["Zomba",-15.39,35.32]],MY:[["George Town",5.41,100.34],["Ipoh",4.6,101.08],["Iskandar Puteri",1.44,103.57],["Johor Bahru",1.49,103.74],["Kota Kinabalu",5.98,116.07],["Kuala Lumpur",3.14,101.69],["Kuantan",3.81,103.33],["Kuching",1.55,110.34],["Malacca City",2.19,102.25],["Petaling Jaya",3.11,101.61],["Putrajaya",2.93,101.69],["Shah Alam",3.07,101.52],["Subang Jaya",3.05,101.59]],ML:[["Bamako",12.64,-8],["Gao",16.27,-.04],["Kayes",14.45,-11.44],["Mopti",14.49,-4.19],["Segou",13.43,-5.67],["Sikasso",11.32,-5.67],["Timbuktu",16.77,-3.01]],MR:[["Atar",20.52,-13.05],["Kaedi",16.15,-13.5],["Nouadhibou",20.94,-17.04],["Nouakchott",18.09,-15.98],["Rosso",16.51,-15.81]],MU:[["Beau Bassin-Rose Hill",-20.23,57.47],["Curepipe",-20.32,57.53],["Port Louis",-20.16,57.5],["Quatre Bornes",-20.26,57.48],["Vacoas-Phoenix",-20.3,57.49]],MX:[["Acapulco",16.86,-99.88],["Aguascalientes",21.88,-102.3],["Cancun",21.16,-86.85],["Chihuahua",28.63,-106.09],["Ciudad Juarez",31.69,-106.42],["Guadalajara",20.67,-103.35],["Hermosillo",29.07,-110.97],["Leon",21.12,-101.68],["Merida",20.97,-89.62],["Mexicali",32.66,-115.47],["Mexico City",19.43,-99.13],["Monterrey",25.67,-100.31],["Oaxaca",17.06,-96.73],["Puebla",19.04,-98.2],["Queretaro",20.59,-100.39],["San Luis Potosi",22.15,-100.98],["Tijuana",32.51,-117.04],["Toluca",19.29,-99.66],["Torreon",25.54,-103.41],["Veracruz",19.18,-96.14]],MA:[["Agadir",30.43,-9.6],["Casablanca",33.57,-7.59],["Fes",34.03,-5],["Kenitra",34.26,-6.58],["Marrakesh",31.63,-8],["Meknes",33.9,-5.55],["Nador",35.17,-2.93],["Oujda",34.68,-1.91],["Rabat",34.02,-6.84],["Sale",34.05,-6.8],["Tangier",35.78,-5.81],["Tetouan",35.57,-5.37]],MZ:[["Beira",-19.84,34.87],["Chimoio",-19.12,33.49],["Inhambane",-23.86,35.38],["Maputo",-25.97,32.57],["Matola",-25.97,32.46],["Nampula",-15.12,39.27],["Quelimane",-17.88,36.89],["Tete",-16.16,33.59]],MM:[["Bago",17.34,96.48],["Mandalay",21.97,96.08],["Mawlamyine",16.49,97.63],["Meiktila",20.88,95.86],["Monywa",21.91,95.13],["Naypyidaw",19.76,96.07],["Pathein",16.78,94.73],["Taunggyi",20.79,97.04],["Yangon",16.87,96.2]],NA:[["Katima Mulilo",-17.5,24.27],["Oshakati",-17.79,15.7],["Rundu",-17.93,19.77],["Swakopmund",-22.68,14.53],["Walvis Bay",-22.96,14.51],["Windhoek",-22.56,17.08]],NP:[["Bharatpur",27.68,84.43],["Biratnagar",26.45,87.27],["Birgunj",27.01,84.88],["Dharan",26.81,87.28],["Kathmandu",27.72,85.32],["Lalitpur",27.67,85.32],["Pokhara",28.21,83.99]],NL:[["Almere",52.38,5.21],["Amsterdam",52.37,4.9],["Breda",51.59,4.78],["Eindhoven",51.44,5.47],["Groningen",53.22,6.57],["Haarlem",52.38,4.64],["Maastricht",50.85,5.69],["Nijmegen",51.84,5.87],["Rotterdam",51.92,4.48],["The Hague",52.08,4.3],["Tilburg",51.56,5.09],["Utrecht",52.09,5.12]],NZ:[["Auckland",-36.85,174.76],["Christchurch",-43.53,172.64],["Dunedin",-45.87,170.5],["Hamilton",-37.79,175.28],["Napier",-39.49,176.91],["Nelson",-41.27,173.28],["Palmerston North",-40.36,175.61],["Queenstown",-45.03,168.66],["Rotorua",-38.14,176.25],["Tauranga",-37.69,176.17],["Wellington",-41.29,174.78]],NI:[["Chinandega",12.63,-87.13],["Esteli",13.09,-86.36],["Granada",11.93,-85.96],["Leon",12.44,-86.88],["Managua",12.15,-86.27],["Masaya",11.97,-86.09],["Matagalpa",12.93,-85.92]],NE:[["Agadez",16.97,7.99],["Maradi",13.5,7.1],["Niamey",13.51,2.13],["Tahoua",14.89,5.26],["Zinder",13.8,8.99]],NG:[["Abeokuta",7.16,3.35],["Abuja",9.06,7.49],["Ado Ekiti",7.62,5.22],["Benin City",6.34,5.63],["Calabar",4.95,8.32],["Enugu",6.44,7.5],["Ibadan",7.38,3.94],["Ilorin",8.5,4.55],["Jos",9.92,8.9],["Kaduna",10.52,7.43],["Kano",12,8.52],["Lagos",6.52,3.38],["Maiduguri",11.85,13.16],["Ogbomosho",8.13,4.24],["Onitsha",6.15,6.78],["Owerri",5.48,7.03],["Port Harcourt",4.78,7.01],["Sokoto",13.06,5.24],["Warri",5.52,5.76],["Zaria",11.08,7.71]],NO:[["Bergen",60.39,5.32],["Bodo",67.28,14.4],["Drammen",59.74,10.2],["Fredrikstad",59.22,10.93],["Kristiansand",58.15,8],["Oslo",59.91,10.75],["Stavanger",58.97,5.73],["Tromso",69.65,18.96],["Trondheim",63.43,10.4]],OM:[["Muscat",23.59,58.54],["Nizwa",22.93,57.53],["Salalah",17.02,54.09],["Sohar",24.35,56.73],["Sur",22.57,59.53]],PK:[["Faisalabad",31.42,73.08],["Gujranwala",32.16,74.19],["Hyderabad",25.4,68.37],["Islamabad",33.69,73.04],["Karachi",24.86,67.01],["Lahore",31.55,74.35],["Multan",30.2,71.45],["Peshawar",34.01,71.58],["Quetta",30.18,66.97],["Rawalpindi",33.6,73.05],["Sialkot",32.5,74.53]],PA:[["Colon",9.36,-79.9],["David",8.43,-82.43],["La Chorrera",8.88,-79.78],["Panama City",9,-79.52],["Santiago",8.1,-80.98]],PY:[["Asuncion",-25.26,-57.58],["Caaguazu",-25.47,-56.02],["Ciudad del Este",-25.51,-54.61],["Concepcion",-23.41,-57.43],["Encarnacion",-27.33,-55.87],["Luque",-25.27,-57.49],["San Lorenzo",-25.34,-57.51]],PE:[["Arequipa",-16.41,-71.54],["Callao",-12.07,-77.13],["Chiclayo",-6.77,-79.84],["Cusco",-13.52,-71.97],["Huancayo",-12.07,-75.21],["Ica",-14.07,-75.73],["Iquitos",-3.75,-73.25],["Lima",-12.05,-77.04],["Piura",-5.19,-80.63],["Puno",-15.84,-70.02],["Tacna",-18.01,-70.25],["Trujillo",-8.11,-79.04]],PH:[["Angeles",15.15,120.59],["Bacolod",10.68,122.97],["Cagayan de Oro",8.48,124.65],["Cebu City",10.31,123.89],["Davao City",7.19,125.46],["General Santos",6.11,125.17],["Iloilo City",10.69,122.56],["Makati",14.55,121.03],["Manila",14.6,120.98],["Pasig",14.58,121.09],["Quezon City",14.68,121.04],["Taguig",14.52,121.05],["Zamboanga City",6.91,122.08]],PL:[["Bialystok",53.13,23.16],["Bydgoszcz",53.12,18.01],["Gdansk",54.35,18.65],["Katowice",50.27,19.02],["Krakow",50.06,19.94],["Lodz",51.75,19.47],["Lublin",51.25,22.57],["Poznan",52.41,16.93],["Rzeszow",50.04,22],["Szczecin",53.43,14.55],["Warsaw",52.23,21.01],["Wroclaw",51.11,17.04]],PT:[["Amadora",38.75,-9.23],["Braga",41.55,-8.43],["Coimbra",40.21,-8.43],["Faro",37.02,-7.93],["Funchal",32.65,-16.91],["Lisbon",38.72,-9.14],["Porto",41.15,-8.61],["Setubal",38.52,-8.9]],QA:[["Al Khor",25.68,51.5],["Al Rayyan",25.29,51.42],["Al Wakrah",25.17,51.61],["Doha",25.29,51.53]],RO:[["Brasov",45.65,25.59],["Bucharest",44.43,26.1],["Cluj-Napoca",46.77,23.6],["Constanta",44.18,28.63],["Craiova",44.32,23.8],["Galati",45.43,28.05],["Iasi",47.16,27.59],["Oradea",47.07,21.92],["Ploiesti",44.94,26.03],["Sibiu",45.8,24.15],["Timisoara",45.75,21.23]],RU:[["Chelyabinsk",55.16,61.4],["Ekaterinburg",56.84,60.6],["Irkutsk",52.3,104.3],["Kaliningrad",54.71,20.51],["Kazan",55.79,49.12],["Khabarovsk",48.48,135.08],["Krasnoyarsk",56.01,92.85],["Moscow",55.76,37.62],["Nizhny Novgorod",56.3,44],["Novosibirsk",55.04,82.93],["Omsk",54.99,73.37],["Perm",58.01,56.25],["Rostov-on-Don",47.24,39.71],["Saint Petersburg",59.93,30.32],["Samara",53.2,50.15],["Sochi",43.6,39.73],["Tyumen",57.15,65.53],["Ufa",54.74,55.97],["Vladivostok",43.12,131.87],["Volgograd",48.71,44.51],["Voronezh",51.67,39.18],["Yakutsk",62.04,129.74]],RW:[["Butare",-2.6,29.74],["Gisenyi",-1.7,29.26],["Kigali",-1.94,30.06],["Musanze",-1.5,29.63],["Rwamagana",-1.95,30.43]],SA:[["Abha",18.22,42.5],["Al Khobar",26.28,50.21],["Buraydah",26.33,43.98],["Dammam",26.43,50.1],["Dhahran",26.3,50.14],["Hail",27.52,41.69],["Jeddah",21.49,39.19],["Jizan",16.89,42.55],["Khamis Mushait",18.31,42.73],["Mecca",21.39,39.86],["Medina",24.47,39.61],["Riyadh",24.71,46.68],["Tabuk",28.38,36.57],["Taif",21.27,40.42]],SN:[["Dakar",14.69,-17.44],["Kaolack",14.15,-16.07],["Mbour",14.42,-16.97],["Saint-Louis",16.02,-16.5],["Thies",14.79,-16.93],["Touba",14.85,-15.88],["Ziguinchor",12.56,-16.27]],RS:[["Belgrade",44.79,20.47],["Kragujevac",44.01,20.91],["Leskovac",42.99,21.95],["Nis",43.32,21.9],["Novi Sad",45.25,19.85],["Subotica",46.1,19.67]],SL:[["Bo",7.96,-11.74],["Freetown",8.48,-13.23],["Kenema",7.88,-11.19],["Makeni",8.88,-12.04]],SG:[["Bedok",1.32,103.93],["Jurong West",1.35,103.71],["Singapore",1.35,103.82],["Tampines",1.35,103.94],["Woodlands",1.44,103.79]],SK:[["Banska Bystrica",48.74,19.15],["Bratislava",48.15,17.11],["Kosice",48.72,21.26],["Nitra",48.31,18.09],["Presov",49,21.24],["Zilina",49.22,18.74]],SI:[["Celje",46.23,15.26],["Koper",45.55,13.73],["Kranj",46.24,14.36],["Ljubljana",46.05,14.51],["Maribor",46.56,15.65]],SO:[["Baidoa",3.12,43.65],["Bosaso",11.28,49.18],["Garowe",8.41,48.49],["Hargeisa",9.56,44.06],["Kismayo",-.35,42.54],["Mogadishu",2.05,45.32]],ZA:[["Bloemfontein",-29.12,26.21],["Cape Town",-33.93,18.42],["Durban",-29.86,31.02],["East London",-33.02,27.91],["Johannesburg",-26.2,28.05],["Kimberley",-28.74,24.76],["Mbombela",-25.47,30.97],["Pietermaritzburg",-29.6,30.38],["Polokwane",-23.9,29.45],["Port Elizabeth",-33.96,25.6],["Pretoria",-25.75,28.19],["Rustenburg",-25.67,27.24],["Soweto",-26.27,27.86],["Vanderbijlpark",-26.71,27.84],["Vereeniging",-26.67,27.93]],KR:[["Busan",35.18,129.08],["Changwon",35.23,128.68],["Cheongju",36.64,127.49],["Daegu",35.87,128.6],["Daejeon",36.35,127.38],["Goyang",37.66,126.83],["Gwangju",35.16,126.85],["Incheon",37.46,126.71],["Jeju",33.5,126.53],["Jeonju",35.82,127.15],["Seongnam",37.44,127.14],["Seoul",37.57,126.98],["Suwon",37.26,127.03],["Ulsan",35.55,129.31],["Yongin",37.24,127.18]],SS:[["Bor",6.21,31.56],["Juba",4.85,31.58],["Malakal",9.53,31.66],["Wau",7.7,28]],ES:[["Alicante",38.35,-.48],["Barcelona",41.39,2.17],["Bilbao",43.26,-2.93],["Cordoba",37.88,-4.78],["Gijon",43.54,-5.66],["Granada",37.18,-3.6],["Las Palmas",28.1,-15.41],["Madrid",40.42,-3.7],["Malaga",36.72,-4.42],["Murcia",37.98,-1.13],["Palma de Mallorca",39.57,2.65],["Santa Cruz de Tenerife",28.47,-16.25],["Seville",37.39,-5.98],["Valencia",39.47,-.38],["Valladolid",41.65,-4.72],["Vigo",42.23,-8.71],["Zaragoza",41.65,-.88]],LK:[["Batticaloa",7.73,81.7],["Colombo",6.93,79.85],["Galle",6.04,80.22],["Jaffna",9.66,80.01],["Kandy",7.29,80.64],["Negombo",7.21,79.84],["Sri Jayawardenepura Kotte",6.89,79.91],["Trincomalee",8.57,81.23]],SD:[["El Obeid",13.18,30.22],["Kassala",15.45,36.4],["Khartoum",15.6,32.53],["Kosti",13.16,32.66],["Nyala",12.05,24.88],["Omdurman",15.64,32.48],["Port Sudan",19.62,37.22],["Wad Madani",14.4,33.52]],SR:[["Lelydorp",5.7,-55.23],["Nieuw Nickerie",5.93,-56.97],["Paramaribo",5.85,-55.17]],SE:[["Gothenburg",57.71,11.97],["Helsingborg",56.05,12.69],["Jonkoping",57.78,14.16],["Linkoping",58.41,15.63],["Lulea",65.58,22.15],["Malmo",55.6,13],["Norrkoping",58.59,16.18],["Orebro",59.27,15.21],["Stockholm",59.33,18.07],["Sundsvall",62.39,17.31],["Umea",63.83,20.26],["Uppsala",59.86,17.64],["Vasteras",59.61,16.55]],CH:[["Basel",47.56,7.59],["Bern",46.95,7.45],["Geneva",46.2,6.14],["Lausanne",46.52,6.63],["Lucerne",47.05,8.31],["Lugano",46,8.95],["St. Gallen",47.42,9.38],["Winterthur",47.5,8.72],["Zurich",47.38,8.54]],SY:[["Aleppo",36.2,37.15],["Damascus",33.51,36.29],["Deir ez-Zor",35.34,40.14],["Hama",35.13,36.75],["Homs",34.73,36.71],["Latakia",35.52,35.78],["Raqqa",35.95,39.01]],TW:[["Changhua",24.08,120.54],["Chiayi",23.48,120.45],["Hsinchu",24.8,120.97],["Hualien",23.98,121.6],["Kaohsiung",22.63,120.3],["Keelung",25.13,121.74],["Taichung",24.15,120.67],["Tainan",23,120.2],["Taipei",25.03,121.57],["Taitung",22.76,121.14],["Taoyuan",24.99,121.31]],TZ:[["Arusha",-3.37,36.68],["Dar es Salaam",-6.79,39.28],["Dodoma",-6.17,35.74],["Morogoro",-6.82,37.66],["Moshi",-3.34,37.34],["Mwanza",-2.52,32.9],["Tanga",-5.07,39.1],["Zanzibar City",-6.17,39.19]],TH:[["Bangkok",13.76,100.5],["Chiang Mai",18.79,98.98],["Chiang Rai",19.91,99.83],["Chon Buri",13.36,100.98],["Hat Yai",7,100.47],["Khon Kaen",16.43,102.83],["Korat",14.97,102.1],["Nonthaburi",13.86,100.51],["Pattaya",12.93,100.87],["Phuket",7.88,98.39],["Surat Thani",9.14,99.33],["Udon Thani",17.42,102.79]],TG:[["Atakpame",7.53,1.13],["Kara",9.55,1.19],["Lome",6.14,1.21],["Sokode",8.98,1.13]],TT:[["Arima",10.64,-61.28],["Chaguanas",10.52,-61.41],["Port of Spain",10.66,-61.51],["San Fernando",10.28,-61.47]],TN:[["Ariana",36.86,10.19],["Bizerte",37.28,9.87],["Gabes",33.88,10.1],["Kairouan",35.67,10.1],["Sfax",34.74,10.76],["Sousse",35.83,10.64],["Tunis",36.81,10.18]],TR:[["Adana",37,35.33],["Ankara",39.93,32.85],["Antalya",36.9,30.7],["Bursa",40.18,29.06],["Diyarbakir",37.92,40.23],["Erzurum",39.9,41.27],["Eskisehir",39.78,30.52],["Gaziantep",37.06,37.38],["Istanbul",41.01,28.98],["Izmir",38.42,27.13],["Kayseri",38.73,35.49],["Konya",37.87,32.48],["Malatya",38.35,38.31],["Mersin",36.8,34.64],["Samsun",41.29,36.33],["Trabzon",41,39.72]],TM:[["Ashgabat",37.96,58.38],["Balkanabat",39.51,54.37],["Dashoguz",41.84,59.97],["Mary",37.6,61.83],["Turkmenabat",39.07,63.57]],UG:[["Entebbe",.06,32.46],["Fort Portal",.66,30.27],["Gulu",2.77,32.3],["Jinja",.43,33.2],["Kampala",.35,32.58],["Lira",2.25,32.54],["Masaka",-.34,31.73],["Mbale",1.07,34.18],["Mbarara",-.61,30.65]],UA:[["Chernihiv",51.49,31.29],["Dnipro",48.46,35.04],["Donetsk",48,37.8],["Ivano-Frankivsk",48.92,24.71],["Kharkiv",49.99,36.23],["Kherson",46.64,32.62],["Kyiv",50.45,30.52],["Lviv",49.84,24.03],["Mykolaiv",46.97,31.99],["Odesa",46.48,30.74],["Poltava",49.59,34.55],["Sumy",50.91,34.8],["Vinnytsia",49.23,28.47],["Zaporizhzhia",47.84,35.14],["Zhytomyr",50.25,28.66]],AE:[["Abu Dhabi",24.45,54.65],["Ajman",25.41,55.44],["Al Ain",24.19,55.76],["Dubai",25.2,55.27],["Fujairah",25.13,56.33],["Ras Al Khaimah",25.79,55.94],["Sharjah",25.34,55.41]],GB:[["Aberdeen",57.15,-2.09],["Belfast",54.6,-5.93],["Birmingham",52.49,-1.9],["Bradford",53.8,-1.75],["Brighton",50.83,-.14],["Bristol",51.45,-2.58],["Cambridge",52.21,.12],["Cardiff",51.48,-3.18],["Coventry",52.41,-1.51],["Edinburgh",55.95,-3.19],["Glasgow",55.86,-4.25],["Leeds",53.8,-1.55],["Leicester",52.64,-1.13],["Liverpool",53.41,-2.98],["London",51.51,-.13],["Manchester",53.48,-2.24],["Newcastle upon Tyne",54.98,-1.61],["Norwich",52.63,1.3],["Nottingham",52.95,-1.15],["Oxford",51.75,-1.25],["Plymouth",50.38,-4.14],["Sheffield",53.38,-1.47],["Southampton",50.9,-1.4],["Swansea",51.62,-3.94]],US:[["Albuquerque",35.08,-106.65],["Atlanta",33.75,-84.39],["Austin",30.27,-97.74],["Baltimore",39.29,-76.61],["Boston",42.36,-71.06],["Charlotte",35.23,-80.84],["Chicago",41.88,-87.63],["Cleveland",41.5,-81.69],["Columbus",39.96,-82.99],["Dallas",32.78,-96.8],["Denver",39.74,-104.99],["Detroit",42.33,-83.05],["El Paso",31.76,-106.49],["Honolulu",21.31,-157.86],["Houston",29.76,-95.37],["Indianapolis",39.77,-86.16],["Jacksonville",30.33,-81.66],["Kansas City",39.1,-94.58],["Las Vegas",36.17,-115.14],["Los Angeles",34.05,-118.24],["Memphis",35.15,-90.05],["Miami",25.76,-80.19],["Milwaukee",43.04,-87.91],["Minneapolis",44.98,-93.27],["Nashville",36.16,-86.78],["New Orleans",29.95,-90.07],["New York",40.71,-74.01],["Oklahoma City",35.47,-97.52],["Orlando",28.54,-81.38],["Philadelphia",39.95,-75.17],["Phoenix",33.45,-112.07],["Pittsburgh",40.44,-80],["Portland",45.52,-122.68],["Raleigh",35.78,-78.64],["Sacramento",38.58,-121.49],["Salt Lake City",40.76,-111.89],["San Antonio",29.42,-98.49],["San Diego",32.72,-117.16],["San Francisco",37.77,-122.42],["San Jose",37.34,-121.89],["Seattle",47.61,-122.33],["St. Louis",38.63,-90.2],["Tampa",27.95,-82.46],["Tucson",32.22,-110.97],["Virginia Beach",36.85,-75.98],["Washington",38.91,-77.04]],UY:[["Las Piedras",-34.73,-56.22],["Maldonado",-34.91,-54.96],["Montevideo",-34.88,-56.16],["Paysandu",-32.32,-58.08],["Rivera",-30.91,-55.55],["Salto",-31.39,-57.97]],UZ:[["Andijan",40.78,72.34],["Bukhara",39.77,64.42],["Fergana",40.38,71.79],["Karshi",38.86,65.8],["Namangan",40.99,71.67],["Navoi",40.1,65.38],["Nukus",42.46,59.6],["Samarkand",39.65,66.96],["Tashkent",41.3,69.28],["Urgench",41.55,60.63]],VE:[["Barcelona",10.13,-64.69],["Barinas",8.63,-70.21],["Barquisimeto",10.07,-69.32],["Caracas",10.48,-66.9],["Ciudad Bolivar",8.13,-63.55],["Ciudad Guayana",8.37,-62.65],["Cumana",10.46,-64.17],["Maracaibo",10.63,-71.63],["Maracay",10.23,-67.6],["Maturin",9.75,-63.18],["Merida",8.6,-71.14],["San Cristobal",7.77,-72.23],["Valencia",10.16,-68.01]],VN:[["Bien Hoa",10.95,106.82],["Can Tho",10.03,105.78],["Da Nang",16.07,108.22],["Haiphong",20.86,106.68],["Hanoi",21.03,105.85],["Ho Chi Minh City",10.82,106.63],["Hue",16.46,107.6],["Nha Trang",12.24,109.19],["Quy Nhon",13.78,109.22],["Rach Gia",10.01,105.08],["Thai Nguyen",21.59,105.85],["Vinh",18.68,105.68],["Vung Tau",10.35,107.08]],YE:[["Aden",12.78,45.04],["Al Hudaydah",14.8,42.95],["Ibb",13.97,44.18],["Sana'a",15.35,44.21],["Taiz",13.58,44.02]],ZM:[["Chipata",-13.64,32.65],["Kabwe",-14.44,28.45],["Kitwe",-12.8,28.21],["Livingstone",-17.84,25.85],["Lusaka",-15.39,28.32],["Ndola",-12.96,28.63]],ZW:[["Bulawayo",-20.15,28.58],["Chitungwiza",-18.01,31.08],["Gweru",-19.45,29.82],["Harare",-17.83,31.05],["Masvingo",-20.07,30.83],["Mutare",-18.97,32.67]]};function rs(l,h){const s=fo[l];if(!s)return null;const c=h.toLowerCase(),u=s.find(b=>b[0].toLowerCase()===c);return u?[u[1],u[2]]:null}let eo;function Ht(l){const h=_("toast");h.textContent=l,h.classList.add("show"),clearTimeout(eo),eo=setTimeout(()=>h.classList.remove("show"),2200)}let Fe=null;function hs(l){Fe=l;const h=_("fCountry");no.forEach(c=>{const u=document.createElement("option");u.value=c[0],u.textContent=c[1]+" "+c[2],h.appendChild(u)}),_("fCountry").addEventListener("change",()=>{const c=_("fCountry").value;_("cityRow").style.display=c?"block":"none",c||(_("fCity").value=""),mo(c)}),_("choosePhBtn").addEventListener("click",()=>_("phIn").click()),_("clearPhBtn").addEventListener("click",cs),_("phIn").addEventListener("change",function(){us(this)}),_("cancelAddBtn").addEventListener("click",()=>Pe("addModal")),_("saveBtn").addEventListener("click",ds),_("delBtn").addEventListener("click",fs),_("setMeBtn").addEventListener("click",()=>{if(!f.editingId)return;f.egoId===f.editingId?f.egoId=null:f.egoId=f.editingId,We(),Pe("addModal"),Fe();const c=_("layoutToggle");f.egoId?(c.style.display="",document.querySelectorAll(".lt-btn").forEach(u=>u.classList.toggle("active",u.dataset.layout==="ego")),document.dispatchEvent(new CustomEvent("setLayoutMode",{detail:"ego"}))):(c.style.display="none",document.querySelectorAll(".lt-btn").forEach(u=>u.classList.toggle("active",u.dataset.layout==="classic")),document.dispatchEvent(new CustomEvent("setLayoutMode",{detail:"classic"}))),setTimeout(ue,50)}),_("cancelImpBtn").addEventListener("click",()=>Pe("importModal")),_("impBtn").addEventListener("click",ps),_("fileDrop").addEventListener("click",()=>_("fileIn").click()),_("fileIn").addEventListener("change",function(){io(this)});const s=_("fileDrop");s.addEventListener("dragover",c=>{c.preventDefault(),s.classList.add("dov")}),s.addEventListener("dragleave",()=>s.classList.remove("dov")),s.addEventListener("drop",c=>{c.preventDefault(),s.classList.remove("dov");const u=c.dataTransfer.files[0];if(u&&u.name.endsWith(".json")){const b=new DataTransfer;b.items.add(u),_("fileIn").files=b.files,io(_("fileIn"))}else Ht("Drop a .json file")}),document.addEventListener("keydown",c=>{c.key==="Escape"&&document.querySelectorAll(".mo.open").forEach(u=>u.classList.remove("open"))}),document.querySelectorAll(".mo").forEach(c=>{c.addEventListener("click",u=>{u.target===c&&c.classList.remove("open")})})}function Wi(l){if(f.editingId=l||null,_("mdTitle").textContent=l?"Edit Member":"Add Family Member",_("saveBtn").textContent=l?"Save":"Add",_("delBtn").style.display=l?"inline-block":"none",["fP1","fP2","fSp"].forEach(s=>{_(s).innerHTML=s==="fP1"?'<option value="">â€” None (Root) â€”</option>':'<option value="">â€” None â€”</option>'}),f.members.forEach(s=>{if(s.id===l)return;const c=bt((s.firstName+" "+(s.lastName||"")).trim()),u='<option value="'+s.id+'">'+c+"</option>";["fP1","fP2","fSp"].forEach(b=>_(b).innerHTML+=u)}),f.pendPh=null,l){const s=j(l);_("fFirst").value=s.firstName,_("fLast").value=s.lastName||"",_("fGender").value=s.gender,_("fBirth").value=s.birthYear||"",_("fCountry").value=s.country||"",_("fCity").value=s.city||"",_("cityRow").style.display=s.country?"block":"none",mo(s.country||""),_("fP1").value=s.parent1Id||"",_("fP2").value=s.parent2Id||"",_("fSp").value=s.spouseId||"",_("fSide").value=s.side||"",_("fNotes").value=s.notes||"",f.pendPh=s.photo||null,s.photo?(_("phPrev").style.backgroundImage="url("+s.photo+")",_("phPrev").textContent="",_("clearPhBtn").style.display="inline-block"):(_("phPrev").style.backgroundImage="",_("phPrev").textContent="ðŸ‘¤",_("clearPhBtn").style.display="none")}else["fFirst","fLast","fBirth","fNotes"].forEach(s=>_(s).value=""),_("fGender").value="male",_("fCountry").value="",_("fCity").value="",_("cityRow").style.display="none",_("fP1").value="",_("fP2").value="",_("fSp").value="",_("fSide").value="",_("phPrev").style.backgroundImage="",_("phPrev").textContent="ðŸ‘¤",_("clearPhBtn").style.display="none";const h=_("setMeBtn");l?(h.style.display="inline-block",h.textContent=f.egoId===l?"Unset Me":"Set as Me"):h.style.display="none",_("phIn").value="",_("addModal").classList.add("open"),setTimeout(()=>_("fFirst").focus(),100)}function mo(l){const h=_("cityList");h.innerHTML="";const s=fo[l];s&&s.forEach(c=>{const u=document.createElement("option");u.value=c[0],h.appendChild(u)})}function Pe(l){_(l).classList.remove("open")}function ls(){f.impData=null,_("selFile").style.display="none",_("impBtn").disabled=!0,_("fileIn").value="",_("importModal").classList.add("open")}function us(l){const h=l.files[0];if(!h)return;const s=new FileReader;s.onload=c=>{const u=new Image;u.onload=()=>{const b=document.createElement("canvas"),S=96;b.width=S,b.height=S;const N=b.getContext("2d"),w=Math.min(u.width,u.height);N.drawImage(u,(u.width-w)/2,(u.height-w)/2,w,w,0,0,S,S),f.pendPh=b.toDataURL("image/jpeg",.65),_("phPrev").style.backgroundImage="url("+f.pendPh+")",_("phPrev").textContent="",_("clearPhBtn").style.display="inline-block"},u.src=c.target.result},s.readAsDataURL(h)}function cs(){f.pendPh="",_("phPrev").style.backgroundImage="",_("phPrev").textContent="ðŸ‘¤",_("clearPhBtn").style.display="none",_("phIn").value=""}function ds(){const l=_("fFirst").value.trim();if(!l){Ht("Enter a first name");return}const h={firstName:l,lastName:_("fLast").value.trim(),gender:_("fGender").value,birthYear:_("fBirth").value?parseInt(_("fBirth").value):null,country:_("fCountry").value||"",city:_("fCity").value.trim(),cityLat:null,cityLng:null,parent1Id:_("fP1").value?parseInt(_("fP1").value):null,parent2Id:_("fP2").value?parseInt(_("fP2").value):null,spouseId:_("fSp").value?parseInt(_("fSp").value):null,side:_("fSide").value||"",notes:_("fNotes").value.trim(),photo:f.pendPh===""?null:f.pendPh||(f.editingId?(j(f.editingId)||{}).photo:null)||null};if(h.country&&h.city){const s=rs(h.country,h.city);s&&(h.cityLat=s[0],h.cityLng=s[1])}if(h.parent1Id&&h.parent1Id===h.parent2Id&&(h.parent2Id=null),f.editingId){const s=f.members.findIndex(u=>u.id===f.editingId),c=f.members[s].spouseId;if(f.members[s]={...f.members[s],...h},c&&c!==h.spouseId){const u=j(c);u&&u.spouseId===f.editingId&&(u.spouseId=null)}if(h.spouseId){const u=j(h.spouseId);u&&(u.spouseId=f.editingId)}Ht("Updated")}else{if(h.id=f.nextId++,f.members.push(h),h.spouseId){const s=j(h.spouseId);s&&(s.spouseId=h.id)}Ht("Added")}We(),Pe("addModal"),Fe()}function fs(){if(!f.editingId||!confirm("Remove this member?"))return;const l=j(f.editingId);if(l&&l.spouseId){const h=j(l.spouseId);h&&(h.spouseId=null)}f.members.forEach(h=>{h.parent1Id===f.editingId&&(h.parent1Id=h.parent2Id||null,h.parent2Id=null),h.parent2Id===f.editingId&&(h.parent2Id=null)}),f.members=f.members.filter(h=>h.id!==f.editingId),We(),Pe("addModal"),Fe(),Ht("Removed")}function ms(){const l={version:4,exportedAt:new Date().toISOString(),memberCount:f.members.length,members:f.members,nextId:f.nextId},h=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),s=URL.createObjectURL(h),c=document.createElement("a");c.href=s,c.download="family-tree-"+new Date().toISOString().slice(0,10)+".json",c.style.display="none",document.body.appendChild(c),c.click(),setTimeout(()=>{document.body.removeChild(c),URL.revokeObjectURL(s)},1e3),Ht("Exported "+f.members.length+" members")}function io(l){const h=l.files[0];if(!h)return;_("selFile").textContent=h.name,_("selFile").style.display="block";const s=new FileReader;s.onload=c=>{try{f.impData=JSON.parse(c.target.result),_("impBtn").disabled=!1}catch{Ht("Invalid JSON"),f.impData=null,_("impBtn").disabled=!0}},s.readAsText(h)}function ps(){if(!f.impData){Ht("No file");return}let l=f.impData.members||[];if(l=l.map(h=>({id:h.id,firstName:h.firstName,lastName:h.lastName||"",gender:h.gender||"male",birthYear:h.birthYear||null,parent1Id:h.parent1Id||h.parentId||null,parent2Id:h.parent2Id||null,spouseId:h.spouseId||null,notes:h.notes||"",photo:h.photo||null,country:h.country||"",city:h.city||"",cityLat:h.cityLat||null,cityLng:h.cityLng||null,side:h.side||""})),!l.every(h=>h.id&&h.firstName)){Ht("Invalid data");return}f.members=l,f.nextId=f.impData.nextId||Math.max(0,...f.members.map(h=>h.id))+1,We(),Pe("importModal"),Fe(),Ht("Imported "+f.members.length+" members")}function po(){oo(),Lt()}function _o(l){document.querySelectorAll(".tab").forEach(h=>h.classList.toggle("active",h.dataset.tab===l)),_("treeView").classList.toggle("active",l==="tree"),_("mapView").classList.toggle("active",l==="map"),l==="map"&&setTimeout(()=>{as(),os(),co()},60),l==="tree"&&Lt()}function go(l){if(_o("tree"),f.lastPos&&f.lastPos[l]){const h=f.lastPos[l],s=_("treeView").getBoundingClientRect();f.scale=1.2,f.panX=s.width/2-(h.x+h.w/2)*f.scale,f.panY=s.height/2-(h.y+h.h/2)*f.scale,Lt()}Wi(l)}Fa();hs(po);Xa();ns();Wa(go);_("searchIn").addEventListener("input",oo);document.querySelectorAll(".tab").forEach(l=>{l.addEventListener("click",()=>_o(l.dataset.tab))});_("themeBtn").addEventListener("click",()=>{Ka(Lt),ss()});_("addBtn").addEventListener("click",()=>Wi());_("exportBtn").addEventListener("click",ms);_("importBtn").addEventListener("click",ls);_("zoomInBtn").addEventListener("click",Va);_("zoomOutBtn").addEventListener("click",Ya);_("fitBtn").addEventListener("click",ue);_("colAllBtn").addEventListener("click",qa);_("expAllBtn").addEventListener("click",Ja);document.querySelectorAll(".sf-btn").forEach(l=>{l.addEventListener("click",()=>{document.querySelectorAll(".sf-btn").forEach(h=>h.classList.remove("active")),l.classList.add("active"),Ua(l.dataset.side)})});document.querySelectorAll(".lt-btn").forEach(l=>{l.addEventListener("click",()=>{document.querySelectorAll(".lt-btn").forEach(h=>h.classList.toggle("active",h.dataset.layout===l.dataset.layout)),ao(l.dataset.layout)})});document.addEventListener("openEdit",l=>Wi(l.detail));document.addEventListener("focusMember",l=>go(l.detail));document.addEventListener("setLayoutMode",l=>ao(l.detail));Ha();f.egoId&&(_("layoutToggle").style.display="");po();f.members.length>0&&setTimeout(ue,50);
